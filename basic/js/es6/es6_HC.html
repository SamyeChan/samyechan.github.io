<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Learn | ES6 高阶 | Hey, I&#39;m Front C</title>
    <meta name="description" content="Just note all I know OR don&#39;t know">
    
    
    <link rel="preload" href="/assets/css/0.styles.cd5c72c6.css" as="style"><link rel="preload" href="/assets/js/app.5a4a4458.js" as="script"><link rel="preload" href="/assets/js/8.8c98aa76.js" as="script"><link rel="prefetch" href="/assets/js/10.4adb0fba.js"><link rel="prefetch" href="/assets/js/100.a67fc97a.js"><link rel="prefetch" href="/assets/js/101.02d3c54c.js"><link rel="prefetch" href="/assets/js/102.d663b1d7.js"><link rel="prefetch" href="/assets/js/103.c030f237.js"><link rel="prefetch" href="/assets/js/104.0266b527.js"><link rel="prefetch" href="/assets/js/105.5f47d4ea.js"><link rel="prefetch" href="/assets/js/106.3ca36216.js"><link rel="prefetch" href="/assets/js/107.f8dd323b.js"><link rel="prefetch" href="/assets/js/108.4bff42f9.js"><link rel="prefetch" href="/assets/js/109.ac794970.js"><link rel="prefetch" href="/assets/js/11.974e2f7c.js"><link rel="prefetch" href="/assets/js/110.f5ccdf47.js"><link rel="prefetch" href="/assets/js/111.4e79eb7e.js"><link rel="prefetch" href="/assets/js/112.b9b81372.js"><link rel="prefetch" href="/assets/js/113.c3bdb42d.js"><link rel="prefetch" href="/assets/js/114.ccb09ce8.js"><link rel="prefetch" href="/assets/js/115.5d848af1.js"><link rel="prefetch" href="/assets/js/116.f84ae96c.js"><link rel="prefetch" href="/assets/js/117.b7b9b66a.js"><link rel="prefetch" href="/assets/js/118.e1279116.js"><link rel="prefetch" href="/assets/js/119.a8b8b535.js"><link rel="prefetch" href="/assets/js/12.1c4c29fe.js"><link rel="prefetch" href="/assets/js/120.ffb6578b.js"><link rel="prefetch" href="/assets/js/121.db13a08d.js"><link rel="prefetch" href="/assets/js/122.f0b079fb.js"><link rel="prefetch" href="/assets/js/123.30c61834.js"><link rel="prefetch" href="/assets/js/124.810d24f0.js"><link rel="prefetch" href="/assets/js/125.40758b79.js"><link rel="prefetch" href="/assets/js/126.43f647ce.js"><link rel="prefetch" href="/assets/js/127.0905114c.js"><link rel="prefetch" href="/assets/js/128.f3e00048.js"><link rel="prefetch" href="/assets/js/129.c8be7e51.js"><link rel="prefetch" href="/assets/js/13.70851fba.js"><link rel="prefetch" href="/assets/js/130.8189350a.js"><link rel="prefetch" href="/assets/js/131.d6d253c6.js"><link rel="prefetch" href="/assets/js/132.6a25ec95.js"><link rel="prefetch" href="/assets/js/133.ae89494f.js"><link rel="prefetch" href="/assets/js/134.235de09d.js"><link rel="prefetch" href="/assets/js/135.73d1f6fd.js"><link rel="prefetch" href="/assets/js/136.abcfccd4.js"><link rel="prefetch" href="/assets/js/137.4258f4ac.js"><link rel="prefetch" href="/assets/js/138.7ac91669.js"><link rel="prefetch" href="/assets/js/139.e11f30ed.js"><link rel="prefetch" href="/assets/js/14.fb05ac3d.js"><link rel="prefetch" href="/assets/js/140.3e43b4dd.js"><link rel="prefetch" href="/assets/js/141.8cf5b44b.js"><link rel="prefetch" href="/assets/js/142.76f060d2.js"><link rel="prefetch" href="/assets/js/143.791d225c.js"><link rel="prefetch" href="/assets/js/144.b39317b7.js"><link rel="prefetch" href="/assets/js/145.f4bacedd.js"><link rel="prefetch" href="/assets/js/146.9e918c9d.js"><link rel="prefetch" href="/assets/js/147.9c2bb32c.js"><link rel="prefetch" href="/assets/js/148.ace04141.js"><link rel="prefetch" href="/assets/js/149.b69ca7cc.js"><link rel="prefetch" href="/assets/js/15.16faeb5d.js"><link rel="prefetch" href="/assets/js/150.22f00f73.js"><link rel="prefetch" href="/assets/js/151.57c9b660.js"><link rel="prefetch" href="/assets/js/152.df9f4f91.js"><link rel="prefetch" href="/assets/js/153.f404aea3.js"><link rel="prefetch" href="/assets/js/154.6bfe0e79.js"><link rel="prefetch" href="/assets/js/155.171953f3.js"><link rel="prefetch" href="/assets/js/156.8c1db452.js"><link rel="prefetch" href="/assets/js/157.b2cd735e.js"><link rel="prefetch" href="/assets/js/158.68cf5b29.js"><link rel="prefetch" href="/assets/js/159.cd035e9d.js"><link rel="prefetch" href="/assets/js/16.bdf0ed86.js"><link rel="prefetch" href="/assets/js/17.6bb4379d.js"><link rel="prefetch" href="/assets/js/18.4f71d5c3.js"><link rel="prefetch" href="/assets/js/19.19a2d82f.js"><link rel="prefetch" href="/assets/js/2.651fc4b6.js"><link rel="prefetch" href="/assets/js/20.3f8bdb35.js"><link rel="prefetch" href="/assets/js/21.c02723fd.js"><link rel="prefetch" href="/assets/js/22.805f7c48.js"><link rel="prefetch" href="/assets/js/23.e43f5f10.js"><link rel="prefetch" href="/assets/js/24.fc0fe76f.js"><link rel="prefetch" href="/assets/js/25.c2d357a3.js"><link rel="prefetch" href="/assets/js/26.7e0c2bb3.js"><link rel="prefetch" href="/assets/js/27.3f964b0a.js"><link rel="prefetch" href="/assets/js/28.ec1fd6e5.js"><link rel="prefetch" href="/assets/js/29.eb003f8c.js"><link rel="prefetch" href="/assets/js/3.1fb71a8c.js"><link rel="prefetch" href="/assets/js/30.f6e68ef7.js"><link rel="prefetch" href="/assets/js/31.6aa2f704.js"><link rel="prefetch" href="/assets/js/32.fb3243f9.js"><link rel="prefetch" href="/assets/js/33.eeb62c67.js"><link rel="prefetch" href="/assets/js/34.f2ecf1db.js"><link rel="prefetch" href="/assets/js/35.833e40c9.js"><link rel="prefetch" href="/assets/js/36.5bd2b6f2.js"><link rel="prefetch" href="/assets/js/37.ca7a33ec.js"><link rel="prefetch" href="/assets/js/38.890bf6dc.js"><link rel="prefetch" href="/assets/js/39.676dbab6.js"><link rel="prefetch" href="/assets/js/4.cc19d063.js"><link rel="prefetch" href="/assets/js/40.9c40818c.js"><link rel="prefetch" href="/assets/js/41.42aafd9b.js"><link rel="prefetch" href="/assets/js/42.04718ebb.js"><link rel="prefetch" href="/assets/js/43.17db4c48.js"><link rel="prefetch" href="/assets/js/44.1c73b69d.js"><link rel="prefetch" href="/assets/js/45.26f14bf8.js"><link rel="prefetch" href="/assets/js/46.84fdff68.js"><link rel="prefetch" href="/assets/js/47.a14751d9.js"><link rel="prefetch" href="/assets/js/48.151f59b7.js"><link rel="prefetch" href="/assets/js/49.e19697d5.js"><link rel="prefetch" href="/assets/js/5.e78c3510.js"><link rel="prefetch" href="/assets/js/50.19d5637a.js"><link rel="prefetch" href="/assets/js/51.6bab69ba.js"><link rel="prefetch" href="/assets/js/52.1d221c1c.js"><link rel="prefetch" href="/assets/js/53.db9c4ffb.js"><link rel="prefetch" href="/assets/js/54.794a75ba.js"><link rel="prefetch" href="/assets/js/55.803b959e.js"><link rel="prefetch" href="/assets/js/56.061e8fbe.js"><link rel="prefetch" href="/assets/js/57.abdaa505.js"><link rel="prefetch" href="/assets/js/58.82e935a6.js"><link rel="prefetch" href="/assets/js/59.7b9e78ac.js"><link rel="prefetch" href="/assets/js/6.3c8b0194.js"><link rel="prefetch" href="/assets/js/60.24db68c4.js"><link rel="prefetch" href="/assets/js/61.fdcfffac.js"><link rel="prefetch" href="/assets/js/62.03961bc6.js"><link rel="prefetch" href="/assets/js/63.20b4c614.js"><link rel="prefetch" href="/assets/js/64.d6ff0ab3.js"><link rel="prefetch" href="/assets/js/65.0cf2cdc6.js"><link rel="prefetch" href="/assets/js/66.680d1313.js"><link rel="prefetch" href="/assets/js/67.a7e6acc4.js"><link rel="prefetch" href="/assets/js/68.e2bddba9.js"><link rel="prefetch" href="/assets/js/69.4ddb1474.js"><link rel="prefetch" href="/assets/js/7.c513628c.js"><link rel="prefetch" href="/assets/js/70.17499cd4.js"><link rel="prefetch" href="/assets/js/71.e9d67aa8.js"><link rel="prefetch" href="/assets/js/72.2f0fe704.js"><link rel="prefetch" href="/assets/js/73.cdaa583a.js"><link rel="prefetch" href="/assets/js/74.bf567fd2.js"><link rel="prefetch" href="/assets/js/75.7dcb2b8b.js"><link rel="prefetch" href="/assets/js/76.f7064f23.js"><link rel="prefetch" href="/assets/js/77.3ce6de43.js"><link rel="prefetch" href="/assets/js/78.cda50167.js"><link rel="prefetch" href="/assets/js/79.5d957ec5.js"><link rel="prefetch" href="/assets/js/80.8888f829.js"><link rel="prefetch" href="/assets/js/81.80ea090e.js"><link rel="prefetch" href="/assets/js/82.989f565e.js"><link rel="prefetch" href="/assets/js/83.bd0ec6a8.js"><link rel="prefetch" href="/assets/js/84.753ddc08.js"><link rel="prefetch" href="/assets/js/85.8dbd9f60.js"><link rel="prefetch" href="/assets/js/86.81cb13fe.js"><link rel="prefetch" href="/assets/js/87.4db2e919.js"><link rel="prefetch" href="/assets/js/88.1257666a.js"><link rel="prefetch" href="/assets/js/89.d6234b3e.js"><link rel="prefetch" href="/assets/js/9.2ea96ce3.js"><link rel="prefetch" href="/assets/js/90.21c6d67a.js"><link rel="prefetch" href="/assets/js/91.df8ca6db.js"><link rel="prefetch" href="/assets/js/92.582dfcd0.js"><link rel="prefetch" href="/assets/js/93.aedae03b.js"><link rel="prefetch" href="/assets/js/94.246aff36.js"><link rel="prefetch" href="/assets/js/95.5e2f4a57.js"><link rel="prefetch" href="/assets/js/96.f0a1c05a.js"><link rel="prefetch" href="/assets/js/97.9f35e990.js"><link rel="prefetch" href="/assets/js/98.65044c2b.js"><link rel="prefetch" href="/assets/js/99.ad198612.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cd5c72c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Hey, I'm Front C</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/start/" class="nav-link">起始</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端三大块</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/basic/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/basic/js/" class="nav-link router-link-active">JS</a></li></ul></li><li class="dropdown-item"><h4>计算机基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">编译原理</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">数据结构</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">算法</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">操作系统</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">计算机网络</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/frame/react/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">微信开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/weapp/platform/" class="nav-link">公众号开发</a></li><li class="dropdown-item"><!----> <a href="/weapp/miniprogram/" class="nav-link">小程序开发</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">Lodash</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">momentjs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/standard/mobile/" class="nav-link">移动端开发</a></li><li class="dropdown-subitem"><a href="/standard/pc/" class="nav-link">PC端开发</a></li><li class="dropdown-subitem"><a href="/standard/map/" class="nav-link">地图开发</a></li></ul></li><li class="dropdown-item"><h4>阅读</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/Advanced-Frontend/Daily-Interview-Question" target="_blank" rel="noopener noreferrer" class="nav-link external">
  每日一题
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>记录life</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/thinks/" class="nav-link">阅读Melody</a></li><li class="dropdown-subitem"><a href="/life/sports/" class="nav-link">运动Love</a></li><li class="dropdown-subitem"><a href="/life/cook/" class="nav-link">食在Cook</a></li><li class="dropdown-subitem"><a href="/life/city/" class="nav-link">城市Walk</a></li></ul></li></ul></div></div> <a href="https://github.com/SamyeChan/growing-up-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/start/" class="nav-link">起始</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端三大块</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/basic/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/basic/js/" class="nav-link router-link-active">JS</a></li></ul></li><li class="dropdown-item"><h4>计算机基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">编译原理</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">数据结构</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">算法</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">操作系统</a></li><li class="dropdown-subitem"><a href="/basic/cs/" class="nav-link">计算机网络</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/frame/react/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">微信开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/weapp/platform/" class="nav-link">公众号开发</a></li><li class="dropdown-item"><!----> <a href="/weapp/miniprogram/" class="nav-link">小程序开发</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">Lodash</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">momentjs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/standard/mobile/" class="nav-link">移动端开发</a></li><li class="dropdown-subitem"><a href="/standard/pc/" class="nav-link">PC端开发</a></li><li class="dropdown-subitem"><a href="/standard/map/" class="nav-link">地图开发</a></li></ul></li><li class="dropdown-item"><h4>阅读</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/Advanced-Frontend/Daily-Interview-Question" target="_blank" rel="noopener noreferrer" class="nav-link external">
  每日一题
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>记录life</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/life/thinks/" class="nav-link">阅读Melody</a></li><li class="dropdown-subitem"><a href="/life/sports/" class="nav-link">运动Love</a></li><li class="dropdown-subitem"><a href="/life/cook/" class="nav-link">食在Cook</a></li><li class="dropdown-subitem"><a href="/life/city/" class="nav-link">城市Walk</a></li></ul></li></ul></div></div> <a href="https://github.com/SamyeChan/growing-up-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>JS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/basic/js/" class="sidebar-link">描述</a></li><li><a href="/basic/js/异步编程/" class="sidebar-link">ES6之异步流程的前世今生</a></li><li><a href="/basic/js/防抖与节流/" class="sidebar-link">防抖与节流</a></li><li><a href="/basic/js/校验/" class="sidebar-link">规则</a></li><li><a href="/basic/js/动画/" class="sidebar-link">动画</a></li><li><a href="/basic/js/异步/" class="sidebar-link">异步处理</a></li><li><a href="/basic/js/闭包/" class="sidebar-link">闭包</a></li><li><a href="/basic/js/正则表达式/" class="sidebar-link">正则表达式</a></li><li><a href="/basic/js/BOM/" class="sidebar-link">BOM</a></li><li><a href="/basic/js/DOM/" class="sidebar-link">DOM</a></li><li><a href="/basic/js/Class/" class="sidebar-link">Class |《JS高级工程师》</a></li><li><a href="/basic/js/事件/" class="sidebar-link">Event</a></li><li><a href="/basic/js/Node/" class="sidebar-link">Node.js</a></li><li><a href="/basic/js/面向对象/" class="sidebar-link">面向对象</a></li><li><a href="/basic/js/This/" class="sidebar-link">判断this指向</a></li><li><a href="/basic/js/NaN/" class="sidebar-link">NaN = Not A Number</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>ES</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/basic/js/ES/" class="sidebar-link">描述</a></li><li><a href="/basic/js/ES/ES6、7、8/" class="sidebar-link">ES6、7、8</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>TS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/basic/js/ts/" class="sidebar-link">Learn | TypeScript</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="learn-es6-高阶"><a href="#learn-es6-高阶" aria-hidden="true" class="header-anchor">#</a> Learn | ES6 高阶</h1> <h2 id="defineproperty"><a href="#defineproperty" aria-hidden="true" class="header-anchor">#</a> defineProperty</h2> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener noreferrer">MDN | Object.defineProperty<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>首先，我们来定义一个普通的对象：</p> <p><img src="/assets/img/0002_defineProperty.8709c1ab.png" alt="普通对象"></p> <p>典型的 <code>属性+__proto__</code> 组合，如果要去劫持这个数据，好像无从下手啊...</p> <p>酱紫的话，我们何不换一种方式去定义对象呢？</p> <p>登登登登！ <code>definePeoperty</code> 出场！</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">definePeoperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span>
<span class="token comment">/**
 * obj - 需定义属性的对象
 *（也可以直接接受一个{}噢 - 不过这样的话，就会又新建一个新对象 - 还是建连接好～）
 * prop - 需定义/修改的属性名称
 * descriptor - 一个对象（“prop的描述符”）
 * 
 * 返回 - 对象
 */</span>
</code></pre></div><p>一个使用小栗子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">/**
 * 直接使用 defineProperty() 对 obj 进行重构
 */</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get - - - name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">'samyechan'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set - - - '</span> <span class="token operator">+</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get - - - age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">22</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set - - - '</span> <span class="token operator">+</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'- - - - - obj - - - - - - -'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'sc'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'- - - - - - get/set - - - - - -'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'- - - - - - for in - - - - - -'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>输出：</p> <p><img src="/assets/img/0001_defineProperty.6f0f5e53.gif" alt="defineProperty"></p> <ul><li><code>obj.name</code> 时，会执行内部 <code>get</code> 函数 - 这就拦截数据了呀；</li> <li><code>obj.name = 'sc';</code> 时，会执行内部 <code>set</code> 函数 - 这也拦截数据了呀；</li> <li>不可对对象进行遍历 - <code>undefined</code>；</li></ul> <h3 id="属性-configurable"><a href="#属性-configurable" aria-hidden="true" class="header-anchor">#</a> 属性 - configurable</h3> <ul><li>属性是否可操作（默认false: 不可以对进行修改/删除）；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  configurable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// name可改</span>
  <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'samyechan'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">22</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'- - - - - obj - - - - - - -'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// + + + 删除操作 + + +</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>输出：</p> <p><img src="/assets/img/0003_defineProperty.347dcb5a.gif" alt="configurable"></p> <ul><li>设置了 <code>configurable: true</code> 的 <code>name</code> 被删除，<code>age</code> 未被删除；</li></ul> <h3 id="属性-enumerable"><a href="#属性-enumerable" aria-hidden="true" class="header-anchor">#</a> 属性 - enumerable</h3> <ul><li>属性是否可被循环（默认false）；</li> <li>影响一些函数对对象的操作；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// name可改</span>
  <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'samyechan'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">22</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' - - 设了name，没设age - -'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// + + + + +</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/0004_defineProperty.cbaf7e1a.gif" alt="enumerable"></p> <ul><li><p>设置 <code>true</code> 的属性可被打印出来，没设置的属性不可打印；</p></li> <li><p>受影响方法（--&gt; 需要可枚举属性才可以哟）：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 01</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 02</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 03</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringfy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 04</span>
Object<span class="token punctuation">.</span>assign
</code></pre></div><p>[ 可枚举 --&gt; 可以被一枚一枚地列举...hhhhhhhh ]</p> <h2 id="proxy代理"><a href="#proxy代理" aria-hidden="true" class="header-anchor">#</a> Proxy代理</h2> <p>vue2.0 --&gt; defineProperty + 订阅
vue3.0 --&gt; ES6 - Proxy + TS</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'samye'</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">23</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * ES6 - proxy 不用像 defineProperty 那样单个单个属性设置
 */</span>
obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="数据劫持"><a href="#数据劫持" aria-hidden="true" class="header-anchor">#</a> 数据劫持</h2> <p>拦截数据后，进行某些操作</p> <p>交换数据（传输数据） - xml、json；
js数据 - 对象数组</p> <ul><li>应用：双向绑定</li></ul> <h2 id="mvvm"><a href="#mvvm" aria-hidden="true" class="header-anchor">#</a> mvvm</h2> <p>数据驱动、数据优先</p> <p>vue、angular</p> <ol><li>编译模块</li> <li>数据劫持</li> <li>发布订阅（自定义事件：系统预定义好了）</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// view model</span>
<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">:</span> <span class="token string">'测试数据'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="小栗子"><a href="#小栗子" aria-hidden="true" class="header-anchor">#</a> 小栗子</h2> <p>原生js + 面向对象思想的实现</p> <h3 id="插值表达式"><a href="#插值表达式" aria-hidden="true" class="header-anchor">#</a> 插值表达式</h3> <h3 id="双向绑定"><a href="#双向绑定" aria-hidden="true" class="header-anchor">#</a> 双向绑定</h3> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/n" target="_blank" rel="noopener noreferrer">MDN | RegExp.$1-$9<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><strong>[想要的效果]</strong> 像 Vue 一样地去使用：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 引入自己的原生手写Cvue框架代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./Cvue.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
...
<span class="token comment">&lt;!-- html 中使用方式与 Vue 相同 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  {{ msg }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  {{ anotherMsg }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">/**
 * 创建一个实例
 */</span>
<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cvue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    anotherMsg<span class="token punctuation">:</span> <span class="token string">'再来一个变量'</span><span class="token punctuation">,</span>
    msg<span class="token punctuation">:</span> <span class="token string">'自己手写一个双向绑定...'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>new</code> 方式创建实例，并进行相关配置；</li> <li><code></code> 形式在 html 中显示，并要绑定实例中的配置变量显示；</li></ul> <h4 id="数据显示"><a href="#数据显示" aria-hidden="true" class="header-anchor">#</a> 数据显示</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Cvue</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 找到 {{}}</span>
  <span class="token function">compile</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 找到挂载点dom</span>
    <span class="token keyword">let</span> els <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 存储其下的子节点（每次遍历一层返回一个数组）</span>
    <span class="token keyword">let</span> childNodes <span class="token operator">=</span> els<span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span>
    childNodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 元素</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'- - - 元素 - - -'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 文本</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'- - - 文本 - - -'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// !【正则】匹配{{}}</span>
        <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/\{\{\s*(\S+)\s*\}\}/g</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * textContent - 拿到【文本】节点上的内容 --&gt; “{{变量名}}”
         */</span>
        <span class="token keyword">let</span> textContent <span class="token operator">=</span> node<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/**
         * reg.test(...) - 文本节点内容是否含有 {{}} --&gt; 返回 boolean
         */</span>
        <span class="token keyword">let</span> test <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">/**
           * RegExp.$1 - 符合 {{}} 格式的文本内含部分 --&gt; MDN:仅允许9位（$1-$9）
           */</span>
          <span class="token keyword">let</span> $<span class="token number">1</span> <span class="token operator">=</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 文本节点重新赋值</span>
          <span class="token comment">// [方法一]</span>
          <span class="token comment">// node.textContent = this.options.data[$1];</span>
          <span class="token comment">// [方法二]</span>
          node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>data<span class="token punctuation">[</span>$<span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>效果：</p> <p><img src="data:image/png;base64,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" alt="单层节点的双向绑定"></p> <p>以上仅是单层节点的实现，如图，深层的文本节点中的 <code>msg</code> 数据未能进行绑定，多层节点变量的双向绑定需要进行 <strong>递归</strong> 了：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">compile</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> els <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> childNodes <span class="token operator">=</span> els<span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span>
  <span class="token comment">// 找{{}}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compileNodes</span><span class="token punctuation">(</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 在所有节点中找 {{}}
 */</span>
<span class="token function">compileNodes</span> <span class="token punctuation">(</span><span class="token parameter">childNodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  childNodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/**
       * 如果元素节点下还有子节点，再执行一次本函数（递归再找）
       */</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compileNodes</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/\{\{\s*(\S+)\s*\}\}/g</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> textContent <span class="token operator">=</span> node<span class="token punctuation">.</span>textContent
      <span class="token keyword">let</span> test <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> $<span class="token number">1</span> <span class="token operator">=</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">;</span>
        node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>data<span class="token punctuation">[</span>$<span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>效果：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcoAAACWCAYAAABep8jkAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AABrlSURBVHic7d19cBT1/Qfw9yXHEPLAQyDEGJ4sNBFIQBipJlK0TGtNRmjTBgjqaPU3jhVa6hRUbDAtkDQ2wCiMtQ8Mlk6roXQiFCjtOEqR2iCBBmMxEoIYQjBIICTkORx3vz/S2+7t7ePd7d5e8n7NOMnt7e1+94j7vs/3+909R39/vwdEREQRrLa2FlOnTjVl21GmbJWIiGiQYFASERGpYFASERGpcIa7AURENPTs27cPlZWVWLBgAXJzcy3dd0VFBT788EO43W7V9ZxOJ7KyshiUYm+88QbOnz+Pn/zkJ3jqqadQW1sLh8MBABg/fjyWLFmCZcuWAQAeeOABbN++HRMnTrS0jTdu3EBZWRn+8Y9/IC4uDitWrMA3v/lN4flVq1YhPz8f69at83mdy+VCcXExFi5cKKy3cuVKpKenW9p+q5w8eRJ1dXUoKCgQll29ehWHDx9Gamoq7r77br/X9PX14a233sLcuXODel88Hg86OzuRkJDgs7yzsxPx8fEBb7ejowN79uzx29e9996LKVOmoLq6GmfOnIHH40FqaiqysrIwbNgwAAMTHT766CO43W6kpaXhzjvvDLgdwbh27RrWr1+Py5cv48033xSWNzU1obS0FPX19bjllluwevVqzJ49GwBw9OhRvPrqq7hy5QqmT5+OdevWYdy4cfj000/xq1/9CgDw2GOPITMzE8DA+7xy5Uq89tpriIuLs/4gSZejR4/C5XLh6NGjlgflhx9+iI0bN+pa96c//Sm7XsW++93vYtWqVcLjwsJCHDlyBO+99x5KSkqwc+dOfPDBB2FsIbBz5050dnbiwIED2LJlC8rLy9HX1wcA6O/vx/nz5/HVr34VR44cEf77y1/+gtTUVOHk6F0vLS0tnIdimuvXr+Ozzz7zWfbFF1/g/fffR1JSkuLrqqqqhGAJxvvvv4/i4mK0t7cLyy5evIi1a9eirq4u4O0mJCTg0UcfFf5bunQp4uPjkZKSgvr6enz++efIy8tDfn4+uru78cknnwAAmpub8cknn2Dx4sX4zne+g6tXr+LKlStBH6dRXV1dWLFiBb785S/7Pffzn/8c8+fPx9/+9jc8/fTTWLduHVwuFzo7O7FhwwasXbsWf/3rXzF9+nS8/PLLAAb+X3jyySexZs0avP7668K2fvvb3+Lhhx9mSNpcdnY2hg0bhuzsbMv3rVVJirlcLlaUYhUVFUJFKeZwOJCeno77778fx44dE6qRY8eO4bnnnsP169exZMkSfO973wMAvPvuu9ixYwc8Hg/GjBmD5557DlOmTMGuXbtQX18Pl8uFlpYWdHd3o7S0FCkpKWhoaMCmTZvQ0tICp9OJwsJCzJw506+NBw8exCuvvIKYmBhMmzYNO3fuFJ6rqalBRkaGUAV7/frXv0ZBQQFGjhypul4gVq9ejcrKSr/l99xzDzZv3hz09gNRWVmJOXPm4NixY8Ky2NhY5Obmora2Fj09PX6vuXTpErq6ujBhwoSg95+dnY2TJ09i06ZNWLt2Lbq6ulBWVoZ58+aFtIL/97//jRkzZmD48OEYPXo0srOzMXz4cADArbfeira2NgBAfX09MjMzERsbCwA+PRBWcjgcKCsrQ2trK/71r38Jy1tbW1FXV4dt27YhOjoaWVlZGDt2LGpqatDW1ob09HShWnz44YeRm5uL/v5+NDY2IiUlBSNHjkRTUxOAgWNtaGjAj3/8Y9W22PHvdqhZtGgRFi1aFO5m6MKK0gC32w2n83+fLRoaGvDGG2/gl7/8JXbs2IHe3l5cunQJpaWlKC0tRXl5ORYuXIji4mIAQHR0NCorK7Fq1Sq89tpryMjIwN69e+HxeFBUVISvf/3r2L17N9atW4fnn38eLpfLZ/8dHR1obW3FsWPHsHTpUjzyyCM4cuSI8Pzx48f9utSamppw4sQJfOtb31JdL1DPPPOMXxXmdDrxgx/8ICTbN+rs2bOIi4tDSkqKz/KEhATFatHtdvt8AApWdHQ0VqxYgTFjxmDz5s0oKytDZmYmHn300ZBsHxj4W2hubhaCNykpCYmJiQAGKreGhgZMmjQJwEB3Z09PD/bv34+KigrU1NSErB1GxMbGyg5VXLhwASkpKT7/b02YMAEXLlxAY2OjcBwAEB8fj4SEBDQ3NyMqKgo3b96Ey+VCVNTAqWzr1q144oknUFRUhDVr1ihW8Hb7uyX7KikpYVDq4fF4UFdXh3feeQfz588Xli9atAhRUVGYMmUKYmJicPXqVVRVVWHOnDmYPHmysE5tbS06OzsBALNmzcLYsWMBABMnTkRLSwsaGxvR2NiIxYsXAwBmzJiBpKQkvxNaR0cHXC4Xuru78ac//QnPP/88NmzYgJaWFgADXYfz5s3zeU15eTny8/N9TkJy6wVq4sSJWLp0qc+ygoICTJkyJSTbN6Kvrw81NTWGj+2jjz7CxIkTMXr06JC1xel04pFHHkFjYyN6enqwfPnykFTwXqdOncL06dOFgPA6cOAAdu/ejeTkZOFvsL+/H62trcjJyUFOTg7Onj2L8+fPh6wtwert7RUqYa+YmBj09vair69P9rm+vj7MmDEDtbW1+PjjjzFjxgwcPHgQ6enpOH78OO666y48++yz2Lp1q+w+7fR3O1Tt27cPa9euxcGDB8PdFADAb37zG5SXl+P48eNobW31eY5BqaKkpAQLFizAvffei6KiIjz99NPCBAMAQlcWMFBFuN1utLW1YdSoUcLy4cOHIyYmBteuXQMw8D+5l/cTcWdnJ27cuIH8/Hzk5eUhLy8Ply5dErrOvOLj4+F2u5Gfnw+Hw4HMzEzcfvvt+M9//oP29nZ0dnb6dB26XC688847uP/++4VlcusF6/HHH8e4ceMAAImJiXjsscdCtm0jqqqqkJmZ6fMea7l+/ToaGhp8/l1DoaOjA1u3bsWsWbNwyy23YNu2bejv7w/Jtt1uNz777DPZu5A8+OCDWL58OXp7e1FVVQUAGDZsGKZOnQqn04nY2FhMmzYNly5dCklbQmHEiBF+3eE9PT2IjY1FTEyM33Pd3d0YMWIEHn/8cezfvx9/+MMfsHz5cuzevRtPPPEE6urqcPvttyM5OVn1OO3ydztUiSfz2MG4ceNw6tQp7N27F1u2bMFLL70kBCfHKFUUFhbigQceMPSaxMREnDp1Snjc19eH3t5eoVtMzrhx4xAbG+s3o1Fq5MiRiI+Px/Xr131mT0ZHR+PEiROYO3euz/o1NTVITU0VKlgAsusFKy4uDt///vdRXFyMlStXBjWzMxhNTU24ePEiqqurAQy897t27UJeXp5fVeJ14cIFdHd3489//jOAgQ8XDocDXV1dAb9P3d3d2LRpE8aOHYuVK1eiv78fv/jFL7Bt2zb86Ec/CnrC0BdffIGRI0f6fCBoampCfHw8Ro8ejZiYGKSlpQknoISEBL+QDmV1G6xJkyahubkZvb29wjGdOXMGy5YtQ0JCgs9Y8+XLl9Hb2yt01b700ksAgJdfflmYwON2u4Xji46OVtyvXf5uh6rs7GxUVlaGZTKPHO/Mca+Ojg6cOnUK586dY0UZavPmzcPJkydx4cIFAMCePXswa9Ys1Rl4ycnJSE1Nxdtvvw1gYEypqKgIXV1dfuvm5ORg586dcLlcqK2tRV1dHTIzM1FVVeU37lhXV4fbbrvNZ5l0ve7ubuzbtw8ez8Atf5ubm3H48GHh+dOnT+PkyZOax52bm4slS5YgJydHc12zLF++HAUFBSgoKMC3v/1tDB8+HAUFBYohCQAzZ87EQw89JLxu2rRpuPPOO4P6MFFdXY0RI0bghz/8IYYNG4a4uDg8++yzaGtrw7lz5wLerldra6tPrwUwMBmpqqoKN27cgNvtxrlz54QPZ9OmTcPHH38sfGg7e/as3xhuOI0ePRoZGRl48803cfPmTbz99ttwu92YOXMmvvKVr6ChoQEnTpyAy+XC73//e3zta1/zGUo4e/YsGhoa8I1vfAMAcNttt6GxsdGvd0eOHf5uh6pFixahtLTUNu/9l770Jb9lGRkZeOaZZ1hRhlpycjIKCwvxwgsvwOVyYfz48X7XNMpZv349ysrKsH37dkRHR2PZsmWy4bpixQps3LgROTk5SExMRFFRERITE1FdXY2nnnrKZ92WlhafahKA33ptbW0oLS1Fbm4unE4nzpw5gx07duC+++4DALz33nu4fPky5syZo9p+h8OhOdMwnKqqqnD69Gl4PB54PB6cOXMG6enpuOuuu0K+r/nz5yMrK8unmklISMD69etVKxy9vF2PYnfccQc++OADVFRUwO12IykpCffccw8AYPLkyWhra8Nbb72F6OhopKWlWX79LwAcPnwYRUVF8Hg8cLlcWLBgASZNmoQ//vGPeOGFF1BcXIzy8nKkpqaipKQE0dHRiIuLw89+9jNs2bIFra2tyMzM9Pv/6ZVXXsHq1auFx0uWLMHGjRuxa9cuPPnkk6ptsvvfLVlnzJgxGDNmjDBM5l0WFxcHB789hIiIrBbqO/MY+faQF198UfaGAxUVFaiurkZGRgbGjx+PQ4cOYeHChawoiYjIeuG8M88dd9yBF198UbjxQElJCYCBccrTp09j8eLFQo/eoUOHWFESEZH19u/fL1SUoRinDMX3UV67dg1NTU3CDS6AgRvIMCiJiCji8YubiYiIwoRBSUREpIJBSUREpIJBSUREpIJBSUREpMJx4sQJznolIqKI5nQ6/b6aMFR4eQgREUU8Xh5CREQUJk4AuHLlis9C73e0SZeHkhX7CMe+iIjswOrzXrhyw7vMTKwoiYiIVDAoiYiIVDAoiYiIVDAoiYiIVPD7KImIaEgoLCwM6HUMSiIiGjK8X9IMDASn+LESdr0SERGpYFASEdGQd/ToUXg88jeqY1ASEdGQd+DAAWzfvh0tLS1+zzEoiYiIAJw/fx6vvvoq3n33Xdy8eVNYzqAkIiL6L5fLhUOHDmHv3r3CMs56JSIi+i+n04kFCxbgvvvu+9+y8DWHiIjIPiZPnoy8vDwkJSX5LGdQEhHRkPfggw/i7rvvhsPh8HtONiiD+ZoUpem1UnIzi8xi5b6IiOzA6vOekf3JhZEeZn6FV1ZWluJzTsD493npCcNA3wgiIhqcIjU7HP39/bpKQLkDtOMBERFR5Ak2Y2prazF16lTVdQK916tiUEobrdVgtU8KDFQioqEpmGwwkkN6gjJQfmOU4oYpNUpuHe9PuTdF77glERENftJsUcod8e8ej0dYz+riSwhKrYAUN1AcikbKZQYmEdHQoJYDWrkhF4hyuWNVYDrVAlIajtIDVKoiGYhEREOb3hxQyhHpcrneS6sC0ym3E/HO5cLR+5iBSEREwZALSLXcUQtMs0TJhaS4gvQ2SG0MUo4VjSciIvszkgdKuSPNJS8rul/9xiilAal1gHKlr9oyIiIaGsTVnzdLtLJC+pz49XK/i39++umnJhzFf4PS23jxgagFpPRg5apP6evD8SmAiIiso1UQyY07SnNCazKp9Hfx+rNnzw7uABQ4xcEo13BxQ5U+CSiNWcqFp/Q5IiIafNRCUZw7ejNH+jrpNswUJd2R1gxW6bpKlaN0GYORiGjoMJINaoWaWgGmFrSh5FdRqhEfqNonArnfeW0lEdHgpHV+lyvE9GaIEisrSqdSgsvdEUE6A0mty1VuwFWpvCYiosFFOl9FLtSUumLFz4nJvd6yilLaELkGySW+UnhqlducyENENDipjUMqTcTR0wuplE2WVJRqT7rdbsXnlLph9ZTR0jBlcBIRRSZpAEqfE/+UZoPb7fYrtqSvlXtOrg1mkr3Xq5HGKA3Qin+X64bV2i4REUUmrcpRKQT1FlBac19CTbiOUo6Rvl/pAYqrS++nBqVPHgxKIqLIJD6Xi3shxed+709ppugNOrXJQlaEZZRWI+R+en9Xel78ZmlNCWZIEhFFLqXzudy535sNctmh9lq1Ys4KUeIdKoWfdIar0u/in2pviPi1DEoiosglPZcHkglKv8tdXSGdSGoFv1mv0gaJG+b9Xe3SEKVlXnouKCUiosikNbaodoc3tesqw3l3N9nrKKUN6+npQW9vn2rDpGOPDD8iIhKTu62d2roxMcMxYsQI1RsLWFFZOpXKWHFXbG9vH269NcX0xhAREXl9/nkzYmJiAIT3ignhi5u1Ju4QERFZSWlcUlphmn5TdKUn2IVKREThpqeb1uycitLaCe+aQ0RE4WKHGw9EKd0VQev6FSIiIrOpDQfK3V/cDFFqO2JIEhFRuCnlk9xlI2aIkrusgxN5iIjIDpTuCKd0M3UzOOVmvEp/JyIiCifpMKF0BiwAtLe3m7Jvpzgk1W5jR0REZCW5fBLfXF16mcioUaNMaYfPvV7lGhgKdps5a7f2aAlne43uO9R3zoi0fysiMoc0k6z8Biqf76MU70zrOyT1MjrQqndfRt8YpTsPBbLvYNsSKcwaJDfyocyqwXoish/xuULpHrFWEL6PUlrGSu/0HohATnB61te6P2Cg2zWynp62hILSTYL1tkNroFtpm2aHk9wfeiD/ruJtEdHgIz7/RUUNdIJKCznTJ/N4d+RtkLhhgYalnpOfWSc3ue3qeROlb7zewDbzJC2daKW2P7XjVnqtXJWt9lhrv2pfyqr3Tk92+6BCROEjPv9FRUXJjlWK1zOLUFHKNS6Yk1Ck3e0nkDfaqpAU708tLEMR3KHoJpdOClNqVyAfTpReT0SDk9o3jlhxaQggmfUq3rEVdzswg9rJWyrYMDfr/dGqHO0YEMHenNhuH1SIyB6kXazSqtKS6yi9DfA2SNzlasfKT4tW5RLMdqyg1EUqvcZVq+LUM6apdYxGPlzIVYZqXa9qVaZeDEqiwU9aQYrHKa0qGpxK45PBVpSBhmy4wznQNz7Ybmqjfe2BvCbQtnkZPUa1UFQLeyk7VtBEZA2titKSrldxQ+QaFqhgujXDfVIM5BIVK8cG1V4TimozUEa3a9duZCKyD7UxScvGKOUaJa0uI4FWO/VeXqD3pB0p74tVpGOU0r8dI9Uvw5OIxMTnk3Cce4WglBsHE/80yuqDCXY8brBQqxrNrODkth3MjFYpo5OxiGhwUCrcrMwYn4pS2uUazInIistDQnnSD6S7dSgwa3JNIN20RDR0SSfvhC0oh7LBcCLWukFBIGOURifzGLmxQKir223btgEAVq1apesxEZEeju7ubo9cN6t41mt7+3VMmJCqf6NBXJpg5OSpd10zuhut7M4N9DjVLujXcxmKkf0pBaTR/ciFud52paWlwePxoL6+XtdjIrK3pqaLGDVqJAD/W9WJxywdDgfq6uowe/ZsU9rhU1FKLwsJJgyCufDcjl2z4u3ZccxT7VKLUI9X6r2sI5jtGhmP8L7mn//8p89yrcdEFBmkkwStngNjWterHS4PCXWo2TUkgcBubh7o8eh9XbC9A0bblZycbOgxEZEeUdqrGKdnfMoqod5XOELSrElV0udDPblGLaAD2R4RUTiYEpRERESDBYOSiIhIBYOSiIhIBYOSiIhIhSVBuTR1sxW70c1u7dESzvYa3bfc+sG0P9L+rYho8DH9zjxLUzdj98U1htbXw8g25bYr165AT8pG2xIpjP7bGdmumNo+dl9cY1o7iIj0MDUoAznB6VlfLdCUntPbjmADONS876HWe6l23GptVNqm2eHk3ba4bYH8u4q3RURkBlOCUs/Jz6yTm9x29YSZOBj0hoTZYSLevlZYqh230mvlqmy1x1r7le5D7u9A6/2y2wcVIiLTKspAqp9wCiTwrApJ8f7UwjIUwR2KbnJvO7Q+eATy4UTp9UREZhl03x6idvKWCjbMzTpJa1WOdgwI7/tl5Tiv3d4DIhqcBl1QalUuwWzHCkpdpOJlSmEpXq5nTFPrGI18uJCrDNW6XtWqTL0YlERkBdOCMtDKItzdsoFWa8G0WzzhxsikI6OvCbRtXkaPUS0U1cJeyo4VNBENHbYcowz3STGQS1SsHBtUe00oqs1AGd2uXbuRiYjEBk3Xq1a46b28QO9JO9yVr91Ixyill6UYqX4ZnkRkJ7breg1UsONxg4Va1WhmBSe37WBmtEoZnYxFRBQqtux61SuUJ32z7ggU6cyaXBNINy0RUTgMmq7XYA2GE7HWDQoCGaM0OpnHyI0FQl3dHtxRDQDI/b+5uh4TEenBbw8ZIuRCVIueGani7UtvNCDdr9b2xesH0uvw999V4++vV+t+TESkh+3GKAM9SSq1IZQVi9mzRoOhdqlFqMcr9V7WEcx2lSYDyfG+ZsOeh3yWaz0mItLD0d3d7fF4PMICj8cD6eP29uuYMCFVdUOcBUqRxG4fdIjIX1PTRYwaNRIOh0NY5nA4ZB/X1dVh9uzZprQjZBUlTzxERDQYcYySiIhIBYOSiIhIBYOSiIhIBYOSiIhIRUQEpXiGU6TtP9xtJyKi4IRs1mswgSC+HGWw8Xg8cDgcho5Rz3s5mN8zIiI7CVlQqp24jQaFnXjbrnUMWuGm9rzcdoPZFxERhY6t7vWqFgBKz5kZwOJw1ApLueXS9Y18YGAYEhHZQ8iDUukEL7dcGhpKIRKOilRun3q7UfVUn1rbYEVJRGQPplSU0pO8XDBoVY/h7MrVqhzVntcbgnLVpnQ7Wm0Ub4+IiMxhq65Xr0AmwISKUqhL73+rZz010m0w7IiI7MmUoJSrhkLVXagURsHOuvW+3mjQiV+j1ZVspKtZz/6JiMh8tul61QpXpd+9+ws2OAJ5fTCBbWSMUqubloiIgPb2dlO2a5uuVz3VVSRUUd42qlW+eo7D6JglEdFQN2rUKFO2a8oNB/R2vWp1d0qvYYyk6zGVJuwY6dpVeh1Dk4jIOiG/4YCRisnozNZIDstg787DcCQiCg/bdL16aVWZgUy8CadAQjKY2bRERBRatglKI+Enrl71viYcxO0z0lY9Xdd2PWYiosHG8qBUqo5CNevUDuRC0Ui4s6IkIrIPy4My0sYZ9dI7O1camErL1LYvtz0iIjJHyIPSSNdpKLdpJquOKdzHSURE/iLii5uJiIjChUFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESkgkFJRESk4v8BtzgeHSSaMrAAAAAASUVORK5CYII=" alt="全节点的双向绑定"></p> <p>但其实这个双向绑定还是有问题的，比如：多层数据渲染会有问题的...</p> <h4 id="数据显示响应修改"><a href="#数据显示响应修改" aria-hidden="true" class="header-anchor">#</a> 数据显示响应修改</h4> <ol><li>定义一个 <code>observer()</code> 来对数据进行监听，并使用 <code>defineProperty</code> 对数据进行劫持：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对数据进行监听</span>
<span class="token function">observer</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Object.keys(data) - 获取到数据对象里面每一个定义变量的 key 值；</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">defineReact</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 劫持数据</span>
<span class="token function">defineReact</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    configurable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO - 这里需要对数据进行一个新的显示改变</span>
      value <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>自定义事件实现</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Cvue 继承 EventTarget（系统预定义的一个类）</span>
<span class="token keyword">class</span> <span class="token class-name">Cvue</span> <span class="token keyword">extends</span> <span class="token class-name">EventTarget</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">...</span><span class="token operator">...</span>

<span class="token comment">// 在 set() 函数中使用自定义事件</span>
<span class="token keyword">set</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// let event = new Event(key);</span>
  <span class="token comment">// 自定义事件</span>
  <span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    detail<span class="token punctuation">:</span> newVal
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  _this<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  value <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 监听 $1 ---&gt; 不是很懂的亚子</span>

<span class="token comment">// 更新渲染视图（将传递过来的新值全局替换）</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>$<span class="token number">1</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'值：'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> newVal <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">;</span>
  <span class="token keyword">let</span> oldVal <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>data<span class="token punctuation">[</span>$<span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 全局匹配 oldVal 变量值，并将其替换为新值</span>
  <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>oldVal<span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> node<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>发布订阅</strong></p> <h4 id="es6-proxy-版"><a href="#es6-proxy-版" aria-hidden="true" class="header-anchor">#</a> ES6 - Proxy 版</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 不需要循环啦～～～
 */</span>

</code></pre></div><h3 id="指令"><a href="#指令" aria-hidden="true" class="header-anchor">#</a> 指令</h3> <p>原理与上述 <strong>双向绑定</strong> 类似，就是在获取到节点后，判断出相应的指令符号，再做下一步操作；</p> <h2 id="es6-模块化"><a href="#es6-模块化" aria-hidden="true" class="header-anchor">#</a> ES6 模块化</h2> <ul><li>独立命名空间 - 防止变量污染；</li> <li>原生模块化需要声明 <code>type='module'</code>：</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./a.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">...</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- emmmm...这个效果好像将页面以服务形式运行才可以看见正常效果... --&gt;</span>
 <span class="token comment">&lt;!-- a.j 里面逻辑可执行，但一些实际赋值啥的就不行了 - 新点的chrome支持 --&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;I'm a.js&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这种console的逻辑还是会执行的，但上面那个就不行了噢'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 1- export defalut xxx; --&gt; 每个文件只能导出一个
 * 1- import xxx from './a.js'
 * 
 * 2- export let a = 35; --&gt; 一个或多个
 *    export let b = 23;
 * 2- import { a, b as c } from './a.js'
 *         --&gt; 给了b一个新名字，使用时就用c了
 * 
 * 3- import * as obj from './a.js';
 * 
 * 4- export { a, b };
 */</span>
</code></pre></div><ul><li>将文件拆分多个，有独立的命名空间;</li> <li>ES5没有模块化；</li></ul> <h2 id="amd-cmd-模块化"><a href="#amd-cmd-模块化" aria-hidden="true" class="header-anchor">#</a> AMD / CMD 模块化</h2></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/SamyeChan/growing-up-docs/edit/master/packages/docs/docs/basic/js/es6/es6_HC.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次编辑: </span> <span class="time">12/27/2019, 6:31:15 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.5a4a4458.js" defer></script><script src="/assets/js/8.8c98aa76.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Demo | 鼠标彩球</title>
    <meta name="description" content="">
    
    
<<<<<<< HEAD
    <link rel="preload" href="/assets/css/0.styles.cd5c72c6.css" as="style"><link rel="preload" href="/assets/js/app.eeafed04.js" as="script"><link rel="preload" href="/assets/js/4.9fb4a8e1.js" as="script"><link rel="prefetch" href="/assets/js/10.2e1b7492.js"><link rel="prefetch" href="/assets/js/11.072b1ec5.js"><link rel="prefetch" href="/assets/js/12.a114e3a6.js"><link rel="prefetch" href="/assets/js/13.5d97b8ed.js"><link rel="prefetch" href="/assets/js/14.af0ec100.js"><link rel="prefetch" href="/assets/js/15.4fc5926f.js"><link rel="prefetch" href="/assets/js/16.42e70420.js"><link rel="prefetch" href="/assets/js/17.c421b56c.js"><link rel="prefetch" href="/assets/js/18.a1ffefe7.js"><link rel="prefetch" href="/assets/js/19.ee1da8cc.js"><link rel="prefetch" href="/assets/js/2.afbf9380.js"><link rel="prefetch" href="/assets/js/20.77e29b77.js"><link rel="prefetch" href="/assets/js/21.9a513871.js"><link rel="prefetch" href="/assets/js/22.e55c0db0.js"><link rel="prefetch" href="/assets/js/23.fd5d7d0e.js"><link rel="prefetch" href="/assets/js/24.13a669c5.js"><link rel="prefetch" href="/assets/js/25.425380b9.js"><link rel="prefetch" href="/assets/js/26.6dfdd324.js"><link rel="prefetch" href="/assets/js/27.0937fed6.js"><link rel="prefetch" href="/assets/js/28.bfb0b483.js"><link rel="prefetch" href="/assets/js/29.49957e12.js"><link rel="prefetch" href="/assets/js/3.0c232385.js"><link rel="prefetch" href="/assets/js/30.acbaaf58.js"><link rel="prefetch" href="/assets/js/31.21a3adad.js"><link rel="prefetch" href="/assets/js/32.d038dc64.js"><link rel="prefetch" href="/assets/js/33.d9e5eea0.js"><link rel="prefetch" href="/assets/js/34.b48cb135.js"><link rel="prefetch" href="/assets/js/35.98e9936d.js"><link rel="prefetch" href="/assets/js/36.fac903a8.js"><link rel="prefetch" href="/assets/js/37.d5297412.js"><link rel="prefetch" href="/assets/js/38.176f58af.js"><link rel="prefetch" href="/assets/js/39.c38a5176.js"><link rel="prefetch" href="/assets/js/40.1bbf90a0.js"><link rel="prefetch" href="/assets/js/41.e3d3f973.js"><link rel="prefetch" href="/assets/js/42.28aa8454.js"><link rel="prefetch" href="/assets/js/43.42e01315.js"><link rel="prefetch" href="/assets/js/44.27db6af7.js"><link rel="prefetch" href="/assets/js/45.ce6a3a05.js"><link rel="prefetch" href="/assets/js/46.6cb6650d.js"><link rel="prefetch" href="/assets/js/47.ac7471ee.js"><link rel="prefetch" href="/assets/js/48.213c97e3.js"><link rel="prefetch" href="/assets/js/49.52e280fd.js"><link rel="prefetch" href="/assets/js/5.9fa0fa23.js"><link rel="prefetch" href="/assets/js/50.d516b96c.js"><link rel="prefetch" href="/assets/js/51.e2ee8c82.js"><link rel="prefetch" href="/assets/js/52.725fe410.js"><link rel="prefetch" href="/assets/js/53.ebd011cc.js"><link rel="prefetch" href="/assets/js/54.fde9837e.js"><link rel="prefetch" href="/assets/js/55.ce8d57e3.js"><link rel="prefetch" href="/assets/js/56.594a608b.js"><link rel="prefetch" href="/assets/js/57.61f10426.js"><link rel="prefetch" href="/assets/js/58.e1138ed6.js"><link rel="prefetch" href="/assets/js/59.eb06b6ea.js"><link rel="prefetch" href="/assets/js/6.7ad30404.js"><link rel="prefetch" href="/assets/js/60.b36c0267.js"><link rel="prefetch" href="/assets/js/61.812cb1e3.js"><link rel="prefetch" href="/assets/js/62.1ea99e63.js"><link rel="prefetch" href="/assets/js/63.106718fc.js"><link rel="prefetch" href="/assets/js/64.cb98fff7.js"><link rel="prefetch" href="/assets/js/65.b44cd27b.js"><link rel="prefetch" href="/assets/js/66.1994a956.js"><link rel="prefetch" href="/assets/js/67.5148b41e.js"><link rel="prefetch" href="/assets/js/68.e0479229.js"><link rel="prefetch" href="/assets/js/69.2d498648.js"><link rel="prefetch" href="/assets/js/7.698e756a.js"><link rel="prefetch" href="/assets/js/70.725fb664.js"><link rel="prefetch" href="/assets/js/71.2b12411c.js"><link rel="prefetch" href="/assets/js/72.22a5d1f9.js"><link rel="prefetch" href="/assets/js/8.3b103cff.js"><link rel="prefetch" href="/assets/js/9.75d3bd5f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cd5c72c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">快速跳转</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/learn-basic.html" class="nav-link">Vue</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">快速跳转</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/learn-basic.html" class="nav-link">Vue</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>起始</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>公众号/小程序</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>HTML</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/html/" class="sidebar-link">简述</a></li><li><a href="/html/canvas/" class="sidebar-link">HTML5 | Canvas</a></li><li><a href="/html/canvas/canvas-colorful-ball.html" class="active sidebar-link">Demo | 鼠标彩球</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/html/canvas/canvas-colorful-ball.html#分析" class="sidebar-link">分析</a></li><li class="sidebar-sub-header"><a href="/html/canvas/canvas-colorful-ball.html#完整代码" class="sidebar-link">完整代码</a></li></ul></li><li><a href="/html/canvas/canvas-asteroids.html" class="sidebar-link">Demo | 射击行星</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>阅读理解</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其他辅助</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="demo-鼠标彩球"><a href="#demo-鼠标彩球" aria-hidden="true" class="header-anchor">#</a> Demo | 鼠标彩球</h1> <p>这是科室新的分享会规则下来后留下的第一份作业，突然想起三三。一年多前他就让我学 Canvas 了，然而我却畏难了。时间果然让人在不知不觉中就成长不少，如今再看这样的效果，不说一看就会，但我不再觉得是难的了。</p> <p>但可惜，我错过了一年，在不难的这上面。</p> <p><img src="/assets/img/canvas-colorful-ball.b3630c8e.gif" alt="演示"></p> <p>跟着隐藏在黑暗中的鼠标，划出一道道彩色的光线</p> <hr> <h2 id="分析"><a href="#分析" aria-hidden="true" class="header-anchor">#</a> 分析</h2> <p>单从 demo 的效果动图，可以对这个小动画作出如下的描述：</p> <ul><li>彩球随着鼠标的移动不断生成；</li> <li>彩球在鼠标移动处生成；</li> <li>彩球在生成之时面积最大，而后就会不断变小，并且发生随机位移；</li> <li>效果好像吐泡泡，泡泡最开始很大，然后慢慢缩小，最后消失；</li></ul> <p>综上，这个动画可能涉及如下知识点：</p> <ul><li><code>canvas</code> 基础绘图；</li> <li><code>arc()</code> 方法绘制圆；</li> <li><code>onmousemove事件</code> - 效果：鼠标移动一次，生成一个圆；</li> <li>原型链、对象、类等概念；</li></ul> <p>→ <a href="/js/js/js-face-to-object.html">友情跳转 | JavaScript 之面向对象编程</a></p> <h3 id="初始化-canvas-画布环境"><a href="#初始化-canvas-画布环境" aria-hidden="true" class="header-anchor">#</a> 初始化 canvas 画布环境</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
=======
    <link rel="preload" href="/assets/css/0.styles.1a1f4878.css" as="style"><link rel="preload" href="/assets/js/app.62e563ec.js" as="script"><link rel="preload" href="/assets/js/2.79583bb8.js" as="script"><link rel="preload" href="/assets/js/5.23cb186d.js" as="script"><link rel="prefetch" href="/assets/js/10.636851a3.js"><link rel="prefetch" href="/assets/js/11.3076694b.js"><link rel="prefetch" href="/assets/js/12.9ec2c8c6.js"><link rel="prefetch" href="/assets/js/13.bb7d636c.js"><link rel="prefetch" href="/assets/js/14.6dfe7da8.js"><link rel="prefetch" href="/assets/js/15.e78f2326.js"><link rel="prefetch" href="/assets/js/16.ac464e9e.js"><link rel="prefetch" href="/assets/js/17.397c0120.js"><link rel="prefetch" href="/assets/js/18.ae8d1230.js"><link rel="prefetch" href="/assets/js/19.2cd3be16.js"><link rel="prefetch" href="/assets/js/20.088f8b61.js"><link rel="prefetch" href="/assets/js/21.a28d4593.js"><link rel="prefetch" href="/assets/js/22.1c79091a.js"><link rel="prefetch" href="/assets/js/23.48188c7d.js"><link rel="prefetch" href="/assets/js/24.b56f702d.js"><link rel="prefetch" href="/assets/js/25.8cfc33fc.js"><link rel="prefetch" href="/assets/js/26.3cc36f0e.js"><link rel="prefetch" href="/assets/js/27.6e662fc9.js"><link rel="prefetch" href="/assets/js/28.36c06e50.js"><link rel="prefetch" href="/assets/js/29.c3884512.js"><link rel="prefetch" href="/assets/js/3.2c5b5da8.js"><link rel="prefetch" href="/assets/js/30.269a6485.js"><link rel="prefetch" href="/assets/js/31.f0846467.js"><link rel="prefetch" href="/assets/js/32.0bd06bba.js"><link rel="prefetch" href="/assets/js/33.c76e0342.js"><link rel="prefetch" href="/assets/js/34.4c24260f.js"><link rel="prefetch" href="/assets/js/35.9c9c723e.js"><link rel="prefetch" href="/assets/js/36.2fc774a3.js"><link rel="prefetch" href="/assets/js/37.4c7f1d5e.js"><link rel="prefetch" href="/assets/js/38.599a3efb.js"><link rel="prefetch" href="/assets/js/39.d97b9d1f.js"><link rel="prefetch" href="/assets/js/4.7ec22ff2.js"><link rel="prefetch" href="/assets/js/40.8fdfb8b5.js"><link rel="prefetch" href="/assets/js/41.d9b5cd77.js"><link rel="prefetch" href="/assets/js/42.c061b87a.js"><link rel="prefetch" href="/assets/js/43.6f6f31e2.js"><link rel="prefetch" href="/assets/js/44.82219af4.js"><link rel="prefetch" href="/assets/js/45.90835d61.js"><link rel="prefetch" href="/assets/js/46.818f2e85.js"><link rel="prefetch" href="/assets/js/47.793a9efb.js"><link rel="prefetch" href="/assets/js/48.24413e76.js"><link rel="prefetch" href="/assets/js/49.49cd401c.js"><link rel="prefetch" href="/assets/js/50.2a9de63f.js"><link rel="prefetch" href="/assets/js/51.75ffa753.js"><link rel="prefetch" href="/assets/js/52.aeaa2a66.js"><link rel="prefetch" href="/assets/js/53.0e6d79b8.js"><link rel="prefetch" href="/assets/js/54.d8fcb37f.js"><link rel="prefetch" href="/assets/js/55.ec6211ed.js"><link rel="prefetch" href="/assets/js/56.832be806.js"><link rel="prefetch" href="/assets/js/57.e5bc799d.js"><link rel="prefetch" href="/assets/js/58.9accc4c6.js"><link rel="prefetch" href="/assets/js/59.4fdfd727.js"><link rel="prefetch" href="/assets/js/6.22588cc2.js"><link rel="prefetch" href="/assets/js/60.88c26ffc.js"><link rel="prefetch" href="/assets/js/61.864bdaee.js"><link rel="prefetch" href="/assets/js/62.e2de34d5.js"><link rel="prefetch" href="/assets/js/63.69e3df8d.js"><link rel="prefetch" href="/assets/js/64.483a63e9.js"><link rel="prefetch" href="/assets/js/65.d0d1c747.js"><link rel="prefetch" href="/assets/js/66.a03da728.js"><link rel="prefetch" href="/assets/js/67.1a314f8a.js"><link rel="prefetch" href="/assets/js/68.42e613e9.js"><link rel="prefetch" href="/assets/js/69.4a441563.js"><link rel="prefetch" href="/assets/js/7.8c46ab3e.js"><link rel="prefetch" href="/assets/js/70.3452ada7.js"><link rel="prefetch" href="/assets/js/71.dfea166b.js"><link rel="prefetch" href="/assets/js/8.c8039d75.js"><link rel="prefetch" href="/assets/js/9.bdf49ab2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1a1f4878.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">快速跳转</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/learn-basic.html" class="nav-link">Vue</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">快速跳转</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/learn-basic.html" class="nav-link">Vue</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>起始</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>公众号/小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>HTML</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/html/" class="sidebar-link">简述</a></li><li><a href="/html/canvas/" class="sidebar-link">HTML5 | Canvas</a></li><li><a href="/html/canvas/canvas-colorful-ball.html" class="active sidebar-link">Demo | 鼠标彩球</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/html/canvas/canvas-colorful-ball.html#分析" class="sidebar-link">分析</a></li><li class="sidebar-sub-header"><a href="/html/canvas/canvas-colorful-ball.html#完整代码" class="sidebar-link">完整代码</a></li></ul></li><li><a href="/html/canvas/canvas-asteroids.html" class="sidebar-link">Demo | 射击行星</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>阅读理解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他辅助</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="demo-鼠标彩球"><a href="#demo-鼠标彩球" aria-hidden="true" class="header-anchor">#</a> Demo | 鼠标彩球</h1> <p>这是科室新的分享会规则下来后留下的第一份作业，突然想起三三。一年多前他就让我学 Canvas 了，然而我却畏难了。时间果然让人在不知不觉中就成长不少，如今再看这样的效果，不说一看就会，但我不再觉得是难的了。</p> <p>但可惜，我错过了一年，在不难的这上面。</p> <p><img src="/assets/img/canvas-colorful-ball.b3630c8e.gif" alt="演示"></p> <p>跟着隐藏在黑暗中的鼠标，划出一道道彩色的光线</p> <hr> <h2 id="分析"><a href="#分析" aria-hidden="true" class="header-anchor">#</a> 分析</h2> <p>单从 demo 的效果动图，可以对这个小动画作出如下的描述：</p> <ul><li>彩球随着鼠标的移动不断生成；</li> <li>彩球在鼠标移动处生成；</li> <li>彩球在生成之时面积最大，而后就会不断变小，并且发生随机位移；</li> <li>效果好像吐泡泡，泡泡最开始很大，然后慢慢缩小，最后消失；</li></ul> <p>综上，这个动画可能涉及如下知识点：</p> <ul><li><code>canvas</code> 基础绘图；</li> <li><code>arc()</code> 方法绘制圆；</li> <li><code>onmousemove事件</code> - 效果：鼠标移动一次，生成一个圆；</li> <li>原型链、对象、类等概念；</li></ul> <p>→ <a href="/js/js/js-face-to-object.html">友情跳转 | JavaScript 之面向对象编程</a></p> <h3 id="初始化-canvas-画布环境"><a href="#初始化-canvas-画布环境" aria-hidden="true" class="header-anchor">#</a> 初始化 canvas 画布环境</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
>>>>>>> c035458ba6fa896ef3fbb40e76860bc7ad11de1b
<span class="token comment">// 设置画布框高</span>
<span class="token comment">//（绝对不能在 css 属性中设置宽高 → 会在默认 300*150 比例下放大/缩小）</span>
canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
<span class="token comment">// 获取上下文环境</span>
<span class="token keyword">let</span> ct <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="画一个圆"><a href="#画一个圆" aria-hidden="true" class="header-anchor">#</a> 画一个圆</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例：空心圆</span>

<span class="token comment">// 开始一条路径</span>
ct<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建路径（arc() - 弧线、曲线、圆等）</span>
ct<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置边色</span>
ct<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'orange'</span><span class="token punctuation">;</span>
<span class="token comment">// 填充</span>
ct<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// fill - 实心； stroke - 空心</span>
</code></pre></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANsAAAB8CAYAAADgmsUWAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AAAoBSURBVHic7d1/bFXlHcfxN5W2t0QqFKytLVGMVXBlo6DO6YwuWdQNpIz5gxlnnP+S6KJRsplG4/4AdJsmzn9mXLZFppuoUH9Atv0jyEQzrCBQMAqGtrQMaeEWey8tLfvjgYBo2wvce77nec7nlTRNSMP99N5+7nPOuc95njFHjx49iogUXJF1AJGkUNlEIqKyiUREZROJiMomEhGVTSQiKptIRFQ2kYiobCIRUdlEIqKyiURkrHWAROo/ANkuyHS6r2yX+/dUFZRVu69UFZRMsM0peTVGE5ELZOgwtDdDdwukWyHTBdlO933suK8XC75ewCN9UFYFqWM/d950mNgAtfOgqMT295PTprLlU1+bK1j7KvjfOleKmrlQXH5SaapyL8pQ/0kl7YQjh479/81QeQPUNrrHGFdb2N9L8kJlO1vdG1252puhv8f98dc2QtUPC/u4Xf868bilk44Vr9GNfBJLKtuZ2roEdjwL42pOjDATvm2TpWfTseKtguxeuGwRfOtXNllkWCrb6dr+NLQshplLYepdJ8634iKzBz5fDpuaoGEZXP6AdSI5Rpf+c7Xzz/BqJfS1w8I+mP5g/IoGUHYhTH8Y7kjDoc/htWrY9VfrVIJGttG1r3Qj2fnXQcOTUDrZOtHpye51+fe/7/LX3GqdKLFUtuHsfQc+WuxGioZlML7OOtHZSe+Alkfg8D6YuQwqr7dOlDgq2zfZ3ASHdrrznUlXW6fJry82uAs75XUw43HrNImic7ZTrZ0PRSm4dnl4RQOYfA1ctxwognU/tU6TKBrZjhvMwFv1MOtpdxk/Cdped4fKc7ZoRkoEVDaA/R/Av3/g/ujOnWqdJlq9n7o3mZvWQ8Vs6zRBU9k+ewE+fR5u3mCdxNaaq9yH4Zfca50kWMku28YH3GTf7z5vnSQeNtzn7jSY9XvrJEFK7gWS1t9C6QUq2smu+RMUT4Ttz1gnCVIyy7bxARjsh/pfWyeJnxlNcKQXPnzIOklwkle2z15wh44q2vDqm6C/G3b+xTpJUJJ1zrb/A/jv/boYkqs1V8LVf4SKWdZJgpCcsg1mYMVkuPNL6yR+ebkU7jgERcXWSbyXnMPIt+rd52hyeuZscc+dnLVklG3tfDczJGkfWOfD+DqYuQTW3WadxHvhl21zE1RclZwpWIUwZQFMqIePn7BO4rWwy7b3HejdCfWPWifx34zHIb0N9q23TuKtsMv20WKYpmUB8uby+92NqHJGwi1b+0p342eIt8lYmXwtlFZAx5vWSbwU7qX/Ny6HG9/0/w7ruEm3wtrbYO5W6yTeCXNk2/lnt2aIipZ/5dNh0mzY9aJ1Eu+EObK9Wglzt/m3OI8vsl3w9ixYsMc6iVfCG9m2Pw1Tf66iFVKqCi663a1lIjkLb2R7qcSt6zhGG/QU1GAWVlTAnX3WSbwRVtm2LoFzSmHag9ZJkmHbU8AQXKGPA3IR1mHkjmfh4rusUyTHxT+DT56zTuGNcMrWvdFtchHHJcFDNa7W7aDTs8k6iRfCKVv7KrebjESrZh50NFun8EJAZWvWZGMLtY3ujU5GFUbZ+trcRoRW+6MlWcWsE1sTy4jCKJtGNVs6lMxJIGXT+ZqpKY3QpkPJ0fhftqHDbrP4Qu9hLcOrvsXt8X100DpJrPlfNh1CxkPtPPdayLD8L1t3C9TMtU4hNbdCT4t1iljzv2zpVigut04hxePhYKt1iljzv2yZLijTrBFzZdW6/D8K/8uW7YRUtXUKSVW710KG5X/ZNLLFg0a2Ufldtv4DMHactqiNg3NS7nUYSFsniS2/y5bt0iz/ONHoNiK/y5bpdC+wxIPKNiKVTfJHF0lG5HfZdBgZLxrZRuR32UQ84nfZUlVudJN40GH9iPwumw5b4kUTDEakskn+aGQbkd9l02FkvKhsI/K7bCUT4EgfDPVbJ5HBrHsddAfGsPwuG7h5kRmNbuY0qo3K/7Lpg9R40MWRUflfNl0kiQeNbKPyv2znTYcjh6xTyECvey1kWP6XbWKDFpqJg/Zmt2CrDMv/LaOG+uEf5bAwa50k2V4aCwv7YYz/79+F4v8zU1QClTe4dQvFxp7VUH2zijaKMJ4dbe5gSytS5ySQsmmBUFNaKDcnYZRNm/LZ0SaUOQujbKBDSSvtK6F2vnUKL6hscnZ0CJmzcMo2sQGyeyGzxzpJcny5GwYOwoQZ1km8EE7ZAC5bBLuWW6dIjs//BnWLrFN4w/8PtU/1cgruSGvh1kIb7IMVlXCnpsrlKqyRDaBhGbQstk4RvpbF7rmWnIU3sgG8Vg0//ghSF1gnCVOmA9ZcAz9ps07ilfBGNtDoVmga1c5ImGWbeg/sfx/SO6yThOfgVjd54OK7rJN4J8yyATQ8CS2PWKcIT8sj7rmV0xZu2WpuhcP74IsN1knCse9dd5PohT+yTuKlcMsGMHMZ7HjWOkU4dvwBGpZap/BW2GWrvB7K6+DjJ6yT+G9zk5spMvla6yTeCrtsADMehwOboO116yT+2v0KpD+B+ketk3gtzM/Zvskbl8GNb8P4S62T+CW9HdYugLnbrJN4Lzll01olZ0Zri+RNcp7BohK4aT2suco6iT9WN8AtG1W0PEnWs1gx290ZsOE+6yTx9949MO0hmPgd6yTBSFbZAC65123IseU31knia/NjbpmDqXdbJwlKcs7ZTrX9GTjSC/VN1kniZfNjkKp0RwCSV8kb2Y6b9kvoPwAbfmGdJD7euwcGMypagSS3bACzfgeVN8KaK62T2FvdAFU3ad5jASX3MPJk3R/CP78Hc7bA+DrrNNFKb4e36t1VR10MKSiV7bihAfdHN3MJTFlgnSYau19x52hztujyfgRUtlOtuw0m1LtpXiHb3OSmYH3/79ZJEkNvZ6e6fgVQBO8uhC/+Y50m//a96363opSKFjGNbMPZt97d/l9a4ZYAKPd8o7+DW92NnwO9MHMpnK/Z+1FT2UbT8aYr3aTZ7kqdb2vaZzpc/p5NLr9u/DSjsuVq14tuZLjodndT6jkp60QjG+xzJWtb6UZmrRliTudsuZp6NyzYA+deCisqoPUp6Gu3TvV1X+6GrUvdAqrl09xycypaLGhkO1PblsEnz7mtqmrmuY09rPaU7t7odpNpb3Zr79ctgisetskiw1LZzlbPJuhodjvoZDpd8aY0QvUthX3cPavdY7Y3u/3Raue73WS0yUVsqWz5lOl0xWtb5fb4rp3nVvkqHg9l1ZCqdt9zPd8bzLr/M9vpvg/0unJ1NLs9rGsb3WP4dtEmoVS2Qjk66IrR0wIHW79amqISV7qTCwhf/ZlMp7u7/OSfOW+6O1StmacZHx5S2SwMpE8U6ni54KvFKquG4nLbnJJXKptIRHQsIhIRlU0kIiqbSERUNpGIqGwiEVHZRCKisolERGUTiYjKJhKR/wOeIzkV6Ok1ygAAAABJRU5ErkJggg==" alt="空心圆"></p> <h3 id="写一个通用圆的方法"><a href="#写一个通用圆的方法" aria-hidden="true" class="header-anchor">#</a> 写一个通用圆的方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例：实心圆</span>
<span class="token keyword">function</span> <span class="token function">singleRound</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> r<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ct<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ct<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ct<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color<span class="token punctuation">;</span>
  ct<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">singleRound</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="单个圆"></p> <h3 id="让圆动起来"><a href="#让圆动起来" aria-hidden="true" class="header-anchor">#</a> 让圆动起来</h3> <p>让圆位置和鼠标相关联起来，鼠标移动一次就会触发一次圆的创建：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// onmousemove - 当鼠标移动即触发，在函数内返回一个当前事件对象</span>
canvas<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// e - 包含一些当前窗口坐标等信息</span>
  <span class="token function">singleRound</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/canvas-move-ball.0926e6f8.gif" alt="跟着鼠标移动"></p> <h3 id="让圆舞动起来"><a href="#让圆舞动起来" aria-hidden="true" class="header-anchor">#</a> 让圆舞动起来</h3> <p>这个效果的实现起初真不知道应该怎么做，要怎么知道哪个圆需要变动？该怎么变动？后来也还是在看了 demo 代码才慢慢恍然大悟，认识到两个重要的概念——类；</p> <ol><li>首先，我们需要圆能自己在生成后慢慢变小，通常页面中多圆同存，酱紫就需要考虑将圆抽离成为一个类，它拥有自己的属性和方法：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义单个圆原型</span>
  <span class="token keyword">function</span> <span class="token function">SingleBall</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取当前圆坐标(x, y)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token comment">// 圆坐标需要的位移量</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dy <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// 圆半径</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token comment">// 圆颜色</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'orange'</span><span class="token punctuation">;</span>

    <span class="token comment">// 在鼠标为导向生成的多个圆效果中，该构造函数还应传入一个存储数组（详见完整代码）</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>以上是对单个圆的简单类封装，包含了基础“外观”的设置（属性）；</p> <p>而关于圆的“内涵”设置（方法），因为每实例化一个类都会重新创建一个构造函数，而方法实际都一样，所以其实直接在新建类原型链的上一层进行方法的定义即可，而不在构造函数中定义方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 球渲染函数 - 渲染之时判断</span>
  <span class="token class-name">SingleBall</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ct</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断小球大小，如果半径小于0就应该销毁</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      ct<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ct<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 实心圆</span>
      ct<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color
      ct<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 球状态刷新函数 - 小球生成时为最大状态，而后逐渐减小，直至消失</span>
  <span class="token class-name">SingleBall</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">refresh</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 位移小球，并不断减小其半径</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dx<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dy<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token operator">--</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 球销毁函数</span>
  <span class="token class-name">SingleBall</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">destroy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ballArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ballArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ballArr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="es6-class版本"><a href="#es6-class版本" aria-hidden="true" class="header-anchor">#</a> ES6 - class版本</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SingleBall</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token parameter">ct<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>

  <span class="token function">refresh</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>

  <span class="token function">destroy</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用、调用和第一种原型链方式一致</span>
</code></pre></div><p><img src="/assets/img/canvas-singlecolor-ball.a436172b.gif" alt="单色动态变换圆"></p> <h2 id="完整代码"><a href="#完整代码" aria-hidden="true" class="header-anchor">#</a> 完整代码</h2> <p>完整代码中对小球的颜色、位移等都做了随机处理，一些细节部分也比上述的有所调整及完善：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">SingleBall</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dx <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dy <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<<<<<<< HEAD
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token template-string"><span class="token string">`rgba(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">;</span>
=======
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgba(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
>>>>>>> c035458ba6fa896ef3fbb40e76860bc7ad11de1b
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">SingleBall</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ct</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>r <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      ct<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ct<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ct<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">;</span>
      ct<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">SingleBall</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">refresh</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dx<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dy<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>r<span class="token operator">--</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">SingleBall</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">destroy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ballArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ballArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ballArr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/* - - - - - - - - - - 执行 - - - - - - - - - - */</span>

  <span class="token comment">// 01. 当 html 中定义了 canvas，直接 js 获取元素 + + + + +</span>
  <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 02. 当 html 中未定义 canvas，需要 js 生成 canvas + + + + +</span>
  <span class="token keyword">let</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 用下列方法设置 canvas 画布大小和在 css 中设置有天差地别的不同哇！！！</span>
  canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
  <span class="token comment">// 确定上下文环境</span>
  <span class="token keyword">let</span> ct <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 显示中的小球数组</span>
  <span class="token keyword">let</span> ballArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 当鼠标移动时，就自动生成一个小球 - 捕获一个 e 就等于生成了一个</span>
  canvas<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">SingleBall</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span> ballArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 指定周期来调用函数</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 清除画布</span>
    ct<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
    <span class="token comment">// 逐个刷新状态</span>
    ballArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      item<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// item &amp;&amp; item.render(ct);</span>
      item<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>ct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
<<<<<<< HEAD
</code></pre></div><p><img src="/assets/img/canvas-mycolorful-ball.af3bd048.gif" alt="随机色动态变换圆"></p> <p><img src="/assets/img/canvas-mycolorful-strokeball.b2606d57.gif" alt="随机色动态变换空心圆"></p> <p>锵锵锵～好似天女散花儿 +_+</p> <p>噢，对了，要想效果更好，记得屏蔽调小鼠标哟 → <code>cursor: none;</code></p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
=======
</code></pre></div><p><img src="/assets/img/canvas-mycolorful-ball.af3bd048.gif" alt="随机色动态变换圆"></p> <p><img src="/assets/img/canvas-mycolorful-strokeball.b2606d57.gif" alt="随机色动态变换空心圆"></p> <p>锵锵锵～好似天女散花儿 +_+</p> <p>噢，对了，要想效果更好，记得屏蔽调小鼠标哟 → <code>cursor: none;</code></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
>>>>>>> c035458ba6fa896ef3fbb40e76860bc7ad11de1b
        ←
        <a href="/html/canvas/" class="prev router-link-active">
          HTML5 | Canvas
        </a></span> <span class="next"><a href="/html/canvas/canvas-asteroids.html">
          Demo | 射击行星
        </a>
        →
<<<<<<< HEAD
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.eeafed04.js" defer></script><script src="/assets/js/4.9fb4a8e1.js" defer></script>
=======
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.62e563ec.js" defer></script><script src="/assets/js/2.79583bb8.js" defer></script><script src="/assets/js/5.23cb186d.js" defer></script>
>>>>>>> c035458ba6fa896ef3fbb40e76860bc7ad11de1b
  </body>
</html>

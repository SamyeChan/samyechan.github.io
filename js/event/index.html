<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Learn | Event</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.cd5c72c6.css" as="style"><link rel="preload" href="/assets/js/app.3f739354.js" as="script"><link rel="preload" href="/assets/js/2.d233157e.js" as="script"><link rel="prefetch" href="/assets/js/10.3fcc67b9.js"><link rel="prefetch" href="/assets/js/11.dc1da60f.js"><link rel="prefetch" href="/assets/js/12.e749ef43.js"><link rel="prefetch" href="/assets/js/13.7455a25f.js"><link rel="prefetch" href="/assets/js/14.32c6ff39.js"><link rel="prefetch" href="/assets/js/15.c72c8429.js"><link rel="prefetch" href="/assets/js/16.995b2042.js"><link rel="prefetch" href="/assets/js/17.a5ab183f.js"><link rel="prefetch" href="/assets/js/18.fd744649.js"><link rel="prefetch" href="/assets/js/19.fbea575a.js"><link rel="prefetch" href="/assets/js/20.48702ac2.js"><link rel="prefetch" href="/assets/js/21.96345291.js"><link rel="prefetch" href="/assets/js/22.dcbb36e4.js"><link rel="prefetch" href="/assets/js/23.6e6c4e30.js"><link rel="prefetch" href="/assets/js/24.3061ce3a.js"><link rel="prefetch" href="/assets/js/25.61d25128.js"><link rel="prefetch" href="/assets/js/26.122f3b54.js"><link rel="prefetch" href="/assets/js/27.18d4801e.js"><link rel="prefetch" href="/assets/js/28.915f00ac.js"><link rel="prefetch" href="/assets/js/29.214a9a56.js"><link rel="prefetch" href="/assets/js/3.aa392f27.js"><link rel="prefetch" href="/assets/js/30.ac128b21.js"><link rel="prefetch" href="/assets/js/31.d5f6a8ed.js"><link rel="prefetch" href="/assets/js/32.9ca0d427.js"><link rel="prefetch" href="/assets/js/33.4c653146.js"><link rel="prefetch" href="/assets/js/34.5003c5ff.js"><link rel="prefetch" href="/assets/js/35.82ef2dae.js"><link rel="prefetch" href="/assets/js/36.e0ed49ee.js"><link rel="prefetch" href="/assets/js/37.c4c7ab6b.js"><link rel="prefetch" href="/assets/js/38.8096d2e8.js"><link rel="prefetch" href="/assets/js/39.cc3e14ac.js"><link rel="prefetch" href="/assets/js/4.ec54bd87.js"><link rel="prefetch" href="/assets/js/40.57132358.js"><link rel="prefetch" href="/assets/js/41.9cf5c4d4.js"><link rel="prefetch" href="/assets/js/42.be65e500.js"><link rel="prefetch" href="/assets/js/43.bfad5580.js"><link rel="prefetch" href="/assets/js/44.f53da215.js"><link rel="prefetch" href="/assets/js/45.99ddee98.js"><link rel="prefetch" href="/assets/js/46.ebed1c1e.js"><link rel="prefetch" href="/assets/js/47.8547e50e.js"><link rel="prefetch" href="/assets/js/48.5d4b87bf.js"><link rel="prefetch" href="/assets/js/49.be6dab84.js"><link rel="prefetch" href="/assets/js/5.2c52df88.js"><link rel="prefetch" href="/assets/js/50.3ecb7782.js"><link rel="prefetch" href="/assets/js/51.f0078910.js"><link rel="prefetch" href="/assets/js/52.031af11f.js"><link rel="prefetch" href="/assets/js/53.1b7ada4d.js"><link rel="prefetch" href="/assets/js/54.4393e0a6.js"><link rel="prefetch" href="/assets/js/55.82776d0d.js"><link rel="prefetch" href="/assets/js/56.a1eb3fbc.js"><link rel="prefetch" href="/assets/js/57.24a612ec.js"><link rel="prefetch" href="/assets/js/58.85f6804c.js"><link rel="prefetch" href="/assets/js/59.fecbf488.js"><link rel="prefetch" href="/assets/js/6.897d5886.js"><link rel="prefetch" href="/assets/js/60.53f412d4.js"><link rel="prefetch" href="/assets/js/61.2ef0fd34.js"><link rel="prefetch" href="/assets/js/62.3f80c557.js"><link rel="prefetch" href="/assets/js/63.6c92c23b.js"><link rel="prefetch" href="/assets/js/64.7c17f7e1.js"><link rel="prefetch" href="/assets/js/65.5c2bb68a.js"><link rel="prefetch" href="/assets/js/66.d5a28689.js"><link rel="prefetch" href="/assets/js/67.feb667a7.js"><link rel="prefetch" href="/assets/js/68.5f3a6542.js"><link rel="prefetch" href="/assets/js/69.8593da36.js"><link rel="prefetch" href="/assets/js/7.c10ee22a.js"><link rel="prefetch" href="/assets/js/70.90891e5d.js"><link rel="prefetch" href="/assets/js/71.4db676fb.js"><link rel="prefetch" href="/assets/js/72.1e6059c4.js"><link rel="prefetch" href="/assets/js/73.278e9187.js"><link rel="prefetch" href="/assets/js/74.8237a006.js"><link rel="prefetch" href="/assets/js/75.88de9850.js"><link rel="prefetch" href="/assets/js/76.a613f15d.js"><link rel="prefetch" href="/assets/js/77.f6bb680a.js"><link rel="prefetch" href="/assets/js/78.b97b5057.js"><link rel="prefetch" href="/assets/js/79.5648ebd7.js"><link rel="prefetch" href="/assets/js/8.dea8a7c6.js"><link rel="prefetch" href="/assets/js/80.3c2e52a3.js"><link rel="prefetch" href="/assets/js/81.1845567b.js"><link rel="prefetch" href="/assets/js/82.1aace9c3.js"><link rel="prefetch" href="/assets/js/83.1c0e71d1.js"><link rel="prefetch" href="/assets/js/84.1ce77713.js"><link rel="prefetch" href="/assets/js/85.d1a98b30.js"><link rel="prefetch" href="/assets/js/86.58fff289.js"><link rel="prefetch" href="/assets/js/9.ab4ee421.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cd5c72c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">快速跳转</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/learn-basic.html" class="nav-link">Vue</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">快速跳转</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/learn-basic.html" class="nav-link">Vue</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>起始</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>公众号/小程序</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/js/dom/" class="sidebar-link">Learn | DOM</a></li><li><a href="/js/bom/" class="sidebar-link">Learn | BOM</a></li><li><a href="/js/event/" class="active sidebar-link">Learn | Event</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/event/#事件监听器" class="sidebar-link">事件监听器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/event/#事件监听和事件绑定的区别" class="sidebar-link">事件监听和事件绑定的区别</a></li><li class="sidebar-sub-header"><a href="/js/event/#事件冒泡" class="sidebar-link">事件冒泡</a></li><li class="sidebar-sub-header"><a href="/js/event/#事件捕获" class="sidebar-link">事件捕获</a></li><li class="sidebar-sub-header"><a href="/js/event/#默认事件" class="sidebar-link">默认事件</a></li><li class="sidebar-sub-header"><a href="/js/event/#取消事件监听" class="sidebar-link">取消事件监听</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/event/#event-事件对象" class="sidebar-link">Event 事件对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/event/#事件源" class="sidebar-link">事件源</a></li><li class="sidebar-sub-header"><a href="/js/event/#事件委托（事件代理）" class="sidebar-link">事件委托（事件代理）</a></li><li class="sidebar-sub-header"><a href="/js/event/#鼠标移入移出事件" class="sidebar-link">鼠标移入移出事件</a></li><li class="sidebar-sub-header"><a href="/js/event/#取消冒泡事件" class="sidebar-link">取消冒泡事件</a></li><li class="sidebar-sub-header"><a href="/js/event/#鼠标位置获取" class="sidebar-link">鼠标位置获取</a></li><li class="sidebar-sub-header"><a href="/js/event/#鼠标右键事件" class="sidebar-link">鼠标右键事件</a></li><li class="sidebar-sub-header"><a href="/js/event/#键盘事件" class="sidebar-link">键盘事件</a></li><li class="sidebar-sub-header"><a href="/js/event/#拖拽思路详解" class="sidebar-link">拖拽思路详解</a></li><li class="sidebar-sub-header"><a href="/js/event/#鼠标滚动事件" class="sidebar-link">鼠标滚动事件</a></li><li class="sidebar-sub-header"><a href="/js/event/#其他常用事件" class="sidebar-link">其他常用事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/event/#小栗子" class="sidebar-link">小栗子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/event/#键盘ltrb的八个方向控制" class="sidebar-link">键盘LTRB的八个方向控制</a></li><li class="sidebar-sub-header"><a href="/js/event/#拖拽画框" class="sidebar-link">拖拽画框</a></li><li class="sidebar-sub-header"><a href="/js/event/#碰撞检测" class="sidebar-link">碰撞检测</a></li><li class="sidebar-sub-header"><a href="/js/event/#画框选择" class="sidebar-link">画框选择</a></li></ul></li><li class="sidebar-sub-header"><a href="/js/event/#习题" class="sidebar-link">习题</a></li></ul></li><li><a href="/js/async/" class="sidebar-link">Learn | 异步处理</a></li><li><a href="/js/animation/" class="sidebar-link">Learn | 动画</a></li><li><a href="/js/oop/" class="sidebar-link">Learn | 面向对象</a></li><li><a href="/js/js/" class="sidebar-link">Learn | 开始</a></li><li><a href="/js/js/js-function.html" class="sidebar-link">Learn | 函数</a></li><li><a href="/js/js/js-face-to-object.html" class="sidebar-link">Learn | 面向对象编程</a></li><li><a href="/js/note-about-this.html" class="sidebar-link">Note | 判断this指向</a></li><li><a href="/js/note-js-es6.html" class="sidebar-link">Note | JS &amp; ES6</a></li><li><a href="/js/es6/" class="sidebar-link">Learn | ECAMScript 6</a></li><li><a href="/js/ts/" class="sidebar-link">Learn | TypeScript</a></li><li><a href="/js/note-useful-function.html" class="sidebar-link">Use | 常用方法</a></li><li><a href="/js/js/uDontKnowJS/book-1.html" class="sidebar-link">Read |《你不知道的JS·上》</a></li><li><a href="/js/class/" class="sidebar-link">Class |《JS高级工程师》</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>阅读理解</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其他辅助</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="learn-event"><a href="#learn-event" aria-hidden="true" class="header-anchor">#</a> Learn | Event</h1> <h2 id="事件监听器"><a href="#事件监听器" aria-hidden="true" class="header-anchor">#</a> 事件监听器</h2> <h3 id="事件监听和事件绑定的区别"><a href="#事件监听和事件绑定的区别" aria-hidden="true" class="header-anchor">#</a> 事件监听和事件绑定的区别</h3> <ul><li>直接使用 onclick 类似的方式添加方法，最后的方法会覆盖掉其前面的方法 - <strong>事件不可累加</strong>；</li> <li>事件监听器就不会；</li> <li>事件监听，事件名称不需要加“on”，且事件可累加，并不会相互覆盖；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> lisener<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token operator">|</span>useCapture<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * type - 事件名称
 * lisener - 事件方法
 * option - 如果是boolean（true：捕获执行 / false：不捕获执行）
 * useCapture - 传递对象；
 *            - 3种值： 1. capture(true/false) - 是否在捕获阶段执行；
 *                     2. once(true/false) - 是否只执行一次（只给元素绑定一次事件）；
 *                     3. passive(true/false) - 阻止取消默认事件；
 * 
 * [ 谁捕获执行，谁就优先执行啦 - 不需要的时候就不要开启捕获啦 ]
 */</span>
</code></pre></div><h3 id="事件冒泡"><a href="#事件冒泡" aria-hidden="true" class="header-anchor">#</a> 事件冒泡</h3> <p>【js 事件流】</p> <ul><li>js当中的一个特性：事件会冒泡；</li> <li>DOM树的由大到小关系，如： <code>html &gt; body &gt; div &gt; ...</code>；</li> <li>如果在执行子元素事件的同时，父元素也有相同的事件，那么也会一并执行父元素事件（事件冒泡）；</li> <li>泡泡嘛，在水底会逐渐变大的哟，然后可以类比一下，点击的小 p，然后不断向上影响；</li></ul> <h3 id="事件捕获"><a href="#事件捕获" aria-hidden="true" class="header-anchor">#</a> 事件捕获</h3> <h4 id="事件冒泡-vs-事件捕获"><a href="#事件冒泡-vs-事件捕获" aria-hidden="true" class="header-anchor">#</a> 事件冒泡 vs 事件捕获</h4> <ul><li>2种事件流：冒泡流 &amp; 捕获流：
<ol><li>事件冒泡的执行顺序：由小到大；</li> <li>事件捕获的执行顺序：由大到小；</li></ol></li></ul> <h3 id="默认事件"><a href="#默认事件" aria-hidden="true" class="header-anchor">#</a> 默认事件</h3> <ul><li>例如：a标签的href功能 - 浏览器给的功能，都是默认事件（默认行为）；</li> <li>阻止a标签的默认行为 - 不要浏览器给的功能；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// e 事件对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 阻止浏览器默认行为</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="阻止浏览器默认行为：e-preventdefault"><a href="#阻止浏览器默认行为：e-preventdefault" aria-hidden="true" class="header-anchor">#</a> 阻止浏览器默认行为：<code>e.preventDefault()</code></h4> <div class="language-js extra-class"><pre class="language-js"><code>a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  passive<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 酱紫的话，e.preventDefault()就失效啦，阻止失败哟</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="取消事件监听"><a href="#取消事件监听" aria-hidden="true" class="header-anchor">#</a> 取消事件监听</h3> <ul><li><code>removeEventListener()</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">removeEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>

<span class="token comment">/**
 * event - 事件名称
 * fn - 绑定的事件函数『不能使用匿名函数，必须是命名函数』
 *      (需要去确定)
 */</span>
</code></pre></div><h2 id="event-事件对象"><a href="#event-事件对象" aria-hidden="true" class="header-anchor">#</a> Event 事件对象</h2> <ul><li>事件函数中有一个默认参数；</li> <li>存储了许多和该事件相关的属性；</li></ul> <h3 id="事件源"><a href="#事件源" aria-hidden="true" class="header-anchor">#</a> 事件源</h3> <ul><li><code>e.target</code> - 事件触发的目标元素（实际点的那个元素）；</li> <li><code>e.currentTarget</code> - 获取事件绑定元素（该事件实际定义所在的那个元素）；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// e 事件对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 事件触发的目标元素</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取事件绑定元素</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 事件冒泡 - 点击子元素的同时也同样触发父元素啊
   */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="事件委托（事件代理）"><a href="#事件委托（事件代理）" aria-hidden="true" class="header-anchor">#</a> 事件委托（事件代理）</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 事件委托</span>
<span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 给 ul（父级）添加事件，同时也给它的儿子们（li）一并加了事件</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'balabababa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取事件源(点的是哪个就返回哪个)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 如果ul内还有孙子（如&lt;p&gt;）
   * 那其实也只会响应点击的那个元素哟（具体效果自己看）
   */</span>
  <span class="token comment">// 可利用 tagName 判断目标元素是否是自己想添加事件的元素 - 返回的是标签大写</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'P'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'这是p，不是li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>优点：
<ol><li>可减少需要添加事件绑定的元素；</li> <li>可给新增 DOM 元素添加事件（在不刷新页面的情况下）；</li></ol></li> <li>缺点：
<ol><li>事件处理函数中需要判断事件源增加逻辑复杂度；</li> <li>祖父级和事件源之间不能有阻止冒泡；</li></ol></li></ul> <h3 id="鼠标移入移出事件"><a href="#鼠标移入移出事件" aria-hidden="true" class="header-anchor">#</a> 鼠标移入移出事件</h3> <ul><li><code>mouseenter</code>、<code>mouseleave</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 若鼠标移入/移出子元素范围，mouseover/mouseout 都会被触发der
 * 
 * 如：鼠标移入子元素时，会先打印‘移出了’，然后再打印一次‘移入了’
 */</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'移入了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'移出了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * mouseenter/mouseleave 不受子元素范围干扰
 * 
 * 如：鼠标移入子元素时，将不会再次触发事件
 */</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'移入了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'移出了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="取消冒泡事件"><a href="#取消冒泡事件" aria-hidden="true" class="header-anchor">#</a> 取消冒泡事件</h3> <ul><li>想要的实现的效果：父子元素上都有事件，且互不干扰；</li> <li>若俩元素分别直接添加事件，那个子元素就会有“事件冒泡”的情况出现；</li> <li>需要取消子元素事件中的冒泡事件：<code>e.stopPropagation()</code> &amp; <code>e.cancelBubble</code>；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 一个旧方法 - ie先支持，后续chrome、firefox才又支持（兼容ok）</span>
  e<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// 2. 真正 w3c 中规范的取消冒泡的方法哟</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="鼠标位置获取"><a href="#鼠标位置获取" aria-hidden="true" class="header-anchor">#</a> 鼠标位置获取</h3> <ul><li><code>e.clientX</code> &amp; <code>e.clientX</code> - 鼠标点击位置（相对于显示区域左上角的位置）；</li> <li><code>e.pageX</code> &amp; <code>e.pageX</code> - 鼠标点击位置（相对于页面的位置）；</li> <li>前者永远相对于视口左上角，而后者是相对于页面（在页面高度 &gt; 可视区时，区别就明显啦）；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 效果：元素跟随鼠标走
 */</span>
<span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 注意：这个要设置以下 position 噢</span>

  <span class="token comment">// div 可跟随鼠标变动，但出了可视区宽高就傻了吧</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

  <span class="token comment">// 所以此处需要用 pageX、pageY</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

  <span class="token comment">// 但其实走出最大那个元素的限定范围也还是有问题der，但...这就是个demo啊</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="鼠标右键事件"><a href="#鼠标右键事件" aria-hidden="true" class="header-anchor">#</a> 鼠标右键事件</h3> <ul><li><code>contextmenu</code>；</li> <li>一般都会直接加在 document 上；</li> <li>[例子] 一个自定义的右键列表：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// contextmenu - “文本菜单”</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 自定义菜单跟随鼠标</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
  <span class="token keyword">let</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

  <span class="token comment">// 2. 阻止浏览器默认行为(自带的右键菜单不要出来～)</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>阻止默认事件：
<ol><li><code>e.preventDefault()</code> - 标准方法，如上；</li> <li><code>return false</code> - 在事件绑定的情况下会失效，主要用于 <code>on...</code> 类的方法下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
  <span class="token keyword">let</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token comment">// 只能在直接添加事件的写法下使用（低版本友好系列 - 即，不怎么推荐）</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="键盘事件"><a href="#键盘事件" aria-hidden="true" class="header-anchor">#</a> 键盘事件</h3> <ul><li><code>keydown</code>、<code>keyup</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'键盘按下'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'键盘抬起'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>键盘事件对象（常用）：
<ol><li><code>e.keyCode</code> - 键码；</li> <li><code>e.key</code> - 键值；</li> <li><code>e.altKey</code> - 用于判断功能键“alt”是否按下；</li> <li><code>e.ctrlKey</code> - 用于判断功能键“ctrl”是否按下；</li> <li><code>e.shiftKey</code> - 用于判断功能键“shift”是否按下；</li></ol></li> <li>制作组合键</li></ul> <h3 id="拖拽思路详解"><a href="#拖拽思路详解" aria-hidden="true" class="header-anchor">#</a> 拖拽思路详解</h3> <ul><li><code>mousedown</code>、<code>mousemove</code>、<code>mouseup</code></li> <li>拖拽公式：元素当前位置 = （鼠标当前位置 - 鼠标初始位置）+ 元素初始位置</li> <li>拖拽问题修复</li> <li>限制范围拖拽</li></ul> <h3 id="鼠标滚动事件"><a href="#鼠标滚动事件" aria-hidden="true" class="header-anchor">#</a> 鼠标滚动事件</h3> <h4 id="mousewheel-e-wheeldelta"><a href="#mousewheel-e-wheeldelta" aria-hidden="true" class="header-anchor">#</a> mousewheel &amp; e.wheelDelta</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 *  mousewheel - 兼容Chrome &amp; IE
 */</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousewheel'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * e.wheelDelta - 滚轮（上：120 / 下：-120）
   * 
   */</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="dommousescroll-e-detail"><a href="#dommousescroll-e-detail" aria-hidden="true" class="header-anchor">#</a> DOMMouseScroll &amp; e.detail</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * DOMMouseScroll - 兼容Firefox
 */</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMMouseScroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * e.detail - 滚轮（上：-3 / 下：3）
   * 
   */</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="注意："><a href="#注意：" aria-hidden="true" class="header-anchor">#</a> 注意：</h4> <ol><li><code>mousewheel</code> 与 <code>DOMMouseScroll</code> [上、下]&amp;[正、负]对应关系相反；</li> <li><code>mousewheel</code> &amp; <code>DOMMouseScroll</code> - 各有所属，同存情况下互不影响；</li></ol> <h4 id="鼠标滚动事件的封装"><a href="#鼠标滚动事件的封装" aria-hidden="true" class="header-anchor">#</a> 鼠标滚动事件的封装</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * el - 滚动的元素
 * downFn - 鼠标滚轮向下时执行的函数
 * upFn - 鼠标滚轮向上时执行的函数
 */</span>
<span class="token keyword">function</span> <span class="token function">toWheel</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> downFn<span class="token punctuation">,</span> upFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * Chrome &amp; IE
   */</span>
  el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousewheel'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>wheelDelta <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 向上</span>
      <span class="token comment">// upFn &amp;&amp; upFn();</span>
      upFn <span class="token operator">&amp;&amp;</span> <span class="token function">upFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 改变 this 指向 el 咯</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// downFn &amp;&amp; downFn();</span>
      downFn <span class="token operator">&amp;&amp;</span> <span class="token function">downFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">/**
   * FireFox
   */</span>
  el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMMouseScroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 向上</span>
      <span class="token comment">// upFn &amp;&amp; upFn();</span>
      upFn <span class="token operator">&amp;&amp;</span> <span class="token function">upFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// downFn &amp;&amp; downFn();</span>
      downFn <span class="token operator">&amp;&amp;</span> <span class="token function">downFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>使用：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">toWheel</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> 
  <span class="token comment">/**
   *  这里的this是指向window
   * （想要改变this指向，那么需要在封装函数里改变指向，令其指向el - call()）
   */</span>
  h <span class="token operator">+=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token comment">// div.style.height = h + 'px';</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> h <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  h <span class="token operator">-=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token comment">// div.style.height = h + 'px';</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> h <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="其他常用事件"><a href="#其他常用事件" aria-hidden="true" class="header-anchor">#</a> 其他常用事件</h3> <ul><li><code>dblclick</code> - 双击事件（在移动端也有效，但不建议在移动端使用）：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dblclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'dblclick - 双击666'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>focus</code> - 输入框获取焦点：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>ipt<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'focus - 获取焦点'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>blur</code> - 输入框失去焦点：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>ipt<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'blur'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'blur - 失去焦点'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>change</code> - 输入框失去焦点时执行（内容发生变化才会执行）：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>ipt<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'change - 内容改变'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>input</code> - 输入框内容发生变化就会执行（灵敏度高）：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>ipt<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'input - 内容变了了了了啦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>submit</code> - 表单提交</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 去取默认行为（解决提交后页面抖动刷新问题）</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'submit - 提交表单事件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>reset</code> - 表单项内容重置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'reset'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reset - 重置表单事件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>表单的其他放方法：blur()、focus()、select()</li></ul> <p>是 <strong>方法</strong>，不是事件噢～</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 查看按键键码</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 想实现效果 - 回车失焦，空格聚焦
   */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    txt<span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 失去焦点【方法】</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">==</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    txt<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取焦点【方法】</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 想实现效果：shift选中文本框内容
   */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    txt<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 选中文本框内容</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="小栗子"><a href="#小栗子" aria-hidden="true" class="header-anchor">#</a> 小栗子</h2> <h3 id="键盘ltrb的八个方向控制"><a href="#键盘ltrb的八个方向控制" aria-hidden="true" class="header-anchor">#</a> 键盘LTRB的八个方向控制</h3> <h3 id="拖拽画框"><a href="#拖拽画框" aria-hidden="true" class="header-anchor">#</a> 拖拽画框</h3> <p><strong>[ 想要的效果 ]</strong> 鼠标点击网页，而后拖拽，一个矩形框随之变大变小 -（类似绘图中的画框框啊～）;</p> <h4 id="创建-div-元素"><a href="#创建-div-元素" aria-hidden="true" class="header-anchor">#</a> 创建 div 元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 鼠标按下时，进行一系列操作</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 01 会创建一个 div</span>
  <span class="token keyword">let</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 02 为 div 添加样式，让效果显示出来</span>
  box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 03 div 在上一步被设为绝对定位（其位置即为鼠标按下的那一个坐标点）</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token comment">// 04 在 body 中添加该 div</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果：</p> <p><img src="/assets/img/1501_tuozhuai.fc85b9f2.gif" alt="创建元素"></p> <h4 id="鼠标移动时设置-div-的宽高"><a href="#鼠标移动时设置-div-的宽高" aria-hidden="true" class="header-anchor">#</a> 鼠标移动时设置 div 的宽高</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 鼠标按下时，进行一系列操作</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 05 获取 div 初始位置</span>
    <span class="token keyword">let</span> startPos <span class="token operator">=</span> <span class="token punctuation">{</span>
      l<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>
      t<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientY
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     *  此处忽略上一步的 div 创建步骤
     */</span>

    <span class="token comment">// 鼠标移动时设置 div 的宽高 - 使其会根据鼠标移动而变化 </span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 06 实时计算鼠标移动到的当前位置与初始位置间的水平/竖直距离</span>
      <span class="token keyword">let</span> dis <span class="token operator">=</span> <span class="token punctuation">{</span>
        l<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> startPos<span class="token punctuation">.</span>l<span class="token punctuation">,</span>
        t<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> startPos<span class="token punctuation">.</span>t
      <span class="token punctuation">}</span>
      <span class="token comment">// 07 设置 div 宽高</span>
      box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> dis<span class="token punctuation">.</span>l <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
      box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> dis<span class="token punctuation">.</span>t <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果：</p> <p><img src="/assets/img/1502_tuozhuai.d69ce071.gif" alt="元素跟随鼠标大小变化"></p> <p>任存问题：</p> <ol><li>鼠标松开后仍可控制 div 大小；</li> <li>鼠标多次点击，生成多个 div，并会一同影响；</li> <li>“反向”拖拽不得行；</li></ol> <h4 id="解决鼠标松开仍可控制-div-问题"><a href="#解决鼠标松开仍可控制-div-问题" aria-hidden="true" class="header-anchor">#</a> 解决鼠标松开仍可控制 div 问题</h4> <ul><li>添加 <code>mouseup</code> 事件，并在此取消此前的 <code>mousemove</code> 事件；</li> <li>记得封装函数；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 08 封装函数 - 解决鼠标松开仍可控制 div 问题</span>
<span class="token keyword">function</span> <span class="token function">move</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 06 实时计算鼠标移动到的当前位置与初始位置间的水平/竖直距离</span>
  <span class="token keyword">let</span> dis <span class="token operator">=</span> <span class="token punctuation">{</span>
    l<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> startPos<span class="token punctuation">.</span>l<span class="token punctuation">,</span>
    t<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> startPos<span class="token punctuation">.</span>t
  <span class="token punctuation">}</span>
  <span class="token comment">// 07 设置 div 宽高</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> dis<span class="token punctuation">.</span>l <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> dis<span class="token punctuation">.</span>t <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 鼠标移动时设置 div 的宽高 - 使其会根据鼠标移动而变化 </span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
<span class="token comment">// 09 添加 mouseup 事件，并在此取消此前的 `mousedown` 事件</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  once<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 只需要将当前的取消啦</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果：</p> <p><img src="/assets/img/1503_tuozhuai.e71b3c0c.gif" alt="解决鼠标松开仍可控制 div 问题"></p> <h4 id="解决“反向”拖拽不得行问题"><a href="#解决“反向”拖拽不得行问题" aria-hidden="true" class="header-anchor">#</a> 解决“反向”拖拽不得行问题</h4> <ul><li>代表 div 移动距离的 dis 对象应该均为负值；</li> <li>div 坐标由初始、当前坐标中的小值决定（div定位基准：左上角）；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 08 封装函数 - 解决鼠标松开仍可控制 div 问题</span>
<span class="token keyword">function</span> <span class="token function">move</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 06 实时计算鼠标移动到的当前位置与初始位置间的水平/竖直距离</span>
  <span class="token keyword">let</span> dis <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 10 保证距离中的 l、t均为正值 - 让坐标正负去影响左右拖拽</span>
    l<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> startPos<span class="token punctuation">.</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span>
    t<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> startPos<span class="token punctuation">.</span>t<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 11 div 坐标由初始、当前坐标中的小值决定</span>
  <span class="token comment">//（要知道div的基准一直会是左上角哟）</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>startPos<span class="token punctuation">.</span>l<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>startPos<span class="token punctuation">.</span>t<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  <span class="token comment">// 07 设置 div 宽高</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> dis<span class="token punctuation">.</span>l <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> dis<span class="token punctuation">.</span>t <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>效果：</p> <p><img src="/assets/img/1504_tuozhuai.34c341a4.gif" alt="解决“反向”拖拽不得行问题"></p> <h3 id="碰撞检测"><a href="#碰撞检测" aria-hidden="true" class="header-anchor">#</a> 碰撞检测</h3> <p><strong>[ 想要的效果 ]</strong> 两个元素可分别拖动，且重叠时会触发元素的检测标识</p> <p><img src="/assets/img/1602_pengzhuangjiance.7a3fa3af.gif" alt="碰撞检测"></p> <h4 id="实现元素的拖拽"><a href="#实现元素的拖拽" aria-hidden="true" class="header-anchor">#</a> 实现元素的拖拽</h4> <p>这一部分的实现原理与拖拽画框相类似：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 封装方法 - 单个元素的鼠标拖动效果
 */</span>
<span class="token keyword">function</span> <span class="token function">drag</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 01 为元素添加鼠标点击事件</span>
  el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 02 获取当前鼠标坐标</span>
    <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token punctuation">{</span>
      l<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>
      t<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientY
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> startPos <span class="token operator">=</span> <span class="token punctuation">{</span>
      l<span class="token punctuation">:</span> <span class="token function">css</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'left'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      t<span class="token punctuation">:</span> <span class="token function">css</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token string">'top'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 03 目标元素宽高变化设置</span>
    <span class="token keyword">function</span> <span class="token function">move</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> dis <span class="token operator">=</span> <span class="token punctuation">{</span>
        l<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> start<span class="token punctuation">.</span>l<span class="token punctuation">,</span>
        t<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> start<span class="token punctuation">.</span>t
      <span class="token punctuation">}</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> dis<span class="token punctuation">.</span>l <span class="token operator">+</span> startPos<span class="token punctuation">.</span>l <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> dis<span class="token punctuation">.</span>t <span class="token operator">+</span> startPos<span class="token punctuation">.</span>t <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这个阻止浏览器默认行为是解决啥问题啊...</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 04 为元素添加鼠标移动事件</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      once<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>任存问题：</p> <ol><li>浏览器默认行为；</li></ol> <h4 id="获取到元素的四边相关信息"><a href="#获取到元素的四边相关信息" aria-hidden="true" class="header-anchor">#</a> 获取到元素的四边相关信息</h4> <ul><li><code>el.getBoundingClientRect()</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取元素四条边位置</span>
<span class="token keyword">let</span> el1Pos <span class="token operator">=</span> el1<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el1Pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>获取结果：</p> <p><img src="/assets/img/1601_pengzhuangjiance.b5b7ee2f.png" alt="获取元素四条边位置"></p> <ul><li>如上，通过 <code>el.getBoundingClientRect()</code>，我们可以拿到元素4个方向 <code>top</code>、<code>right</code>、<code>bottom</code>、<code>left</code> 的绝对定位值；</li></ul> <h4 id="判断元素是否发生碰撞的方法"><a href="#判断元素是否发生碰撞的方法" aria-hidden="true" class="header-anchor">#</a> 判断元素是否发生碰撞的方法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 封装 - 元素是否发生碰撞
 */</span>
<span class="token keyword">function</span> <span class="token function">isContact</span> <span class="token punctuation">(</span><span class="token parameter">el1<span class="token punctuation">,</span> el2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取两个元素得四条边位置</span>
  <span class="token keyword">let</span> el1Pos <span class="token operator">=</span> el1<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> el2Pos <span class="token operator">=</span> el2<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/**
  * [分析]第一种思路：没碰上的时候（假定 el2Pos 不动）
  * 
  * el2Pos左：el2Pos.left &gt; el1Pos.right
  *       右：el2Pos.right &lt; el1Pos.left
  *       上：el2Pos.top &gt; el1Pos.bottom
  *       下：el2Pos.bottom &lt; el1Pos.top
  */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    el2Pos<span class="token punctuation">.</span>left <span class="token operator">&gt;</span> el1Pos<span class="token punctuation">.</span>right <span class="token operator">||</span>
    el2Pos<span class="token punctuation">.</span>right <span class="token operator">&lt;</span> el1Pos<span class="token punctuation">.</span>left <span class="token operator">||</span>
    el2Pos<span class="token punctuation">.</span>top <span class="token operator">&gt;</span> el1Pos<span class="token punctuation">.</span>bottom <span class="token operator">||</span>
    el2Pos<span class="token punctuation">.</span>bottom <span class="token operator">&lt;</span> el1Pos<span class="token punctuation">.</span>top
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 没碰上</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">// 碰上</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
  * [分析]第二种思路：碰上的时候（假定 el2Pos 不动）
  * 
  * el2Pos左：el2Pos.left &lt; el1Pos.right
  *       右：el2Pos.right &gt; el1Pos.left
  *       上：el2Pos.top &lt; el1Pos.bottom
  *       下：el2Pos.bottom &gt; el1Pos.top
  */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    el2Pos<span class="token punctuation">.</span>left <span class="token operator">&lt;</span> el1Pos<span class="token punctuation">.</span>right <span class="token operator">&amp;&amp;</span>
    el2Pos<span class="token punctuation">.</span>right <span class="token operator">&gt;</span> el1Pos<span class="token punctuation">.</span>left <span class="token operator">&amp;&amp;</span>
    el2Pos<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> el1Pos<span class="token punctuation">.</span>bottom <span class="token operator">&amp;&amp;</span>
    el2Pos<span class="token punctuation">.</span>bottom <span class="token operator">&gt;</span> el1Pos<span class="token punctuation">.</span>top
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">// 碰上</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 没碰上</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>将该方法放于 <code>mousemove</code> 触发的函数下，并可根据返回值设定不同的情形：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 元素碰撞就变色</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isContact</span><span class="token punctuation">(</span>box1<span class="token punctuation">,</span> box2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  box2<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'yellow'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  box2<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'yellowgreen'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="画框选择"><a href="#画框选择" aria-hidden="true" class="header-anchor">#</a> 画框选择</h3> <p><strong>[ 想要的效果 ]</strong> 类似 windows 系统那种选择文件夹啊，然后选了以后直接把它们移到框框可咯</p> <p>--&gt; 批量元素的碰撞检测</p> <h4 id="基本布局"><a href="#基本布局" aria-hidden="true" class="header-anchor">#</a> 基本布局</h4> <p>大概就酱紫：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA7gAAAGcCAYAAADzmwxSAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AABFMSURBVHic7d1/8GV1Xcfx1/4SWAIWXVZFEBCcxBYhFSN1hhL5EaKIBiaMVjapJSgmq4E6mloaIfIjx8xGEydCm7RJQlwFHR2HlFJBQPwBSCCo/FgQd13YXb79caAv3/Zr6Iic2+s+HjPfOXvPfmfnPWf3e/c+7/mccxfMzMzMBAAAAP6fWzj2AAAAAPBAELgAAABUELgAAABUELgAAABUELgAAABUELgAAABUWHy/33HQggdhDAAAALgfq//vT7m9/8D9Kf4QAAAA+IX6KU6+WqIMAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABAhcU/1XcdtOAXPAYAAAD8fBbMzMzMjD0EAAAA/LwsUQYAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKCCwAUAAKDC4rEHeNCcvWDsCR4YR888sH+e4zI/x2V+jsv8HJf5OS7zc1zm57jMz3EB+Jk4gwsAAEAFgQsAAECF6VmifI+7707+9sLkzNXJ5SePPc1kOPydyY23JTtsm9zyo2T/xyVvfn6y1UPGnmxcR7wrueYHyY7bJzffkTxl9+TtL0i22WrsySbHD9cl+5yUnPzC5Ld/bexpxnXIXyafvHTuvpcdkPzNS8aZZ5J8+rLkrR9LHrI4+fFdyfZbJx8/YeypxrXsD5Pb122+//WHJ2876sGfZ1Jcdl3ymn9ItliSbNyU3D2TvPOY5Fd2GnuycX39u8mqs5NFC5M1a5OVOyenHpNsOeX/TwPMZ6oC98vXJKecl9ywZgg5BndtSr701uHXP1yXPOHE5M6NyWkvGneusa27M/nKXyQLFiRr1w8ht2FT8t4/GHuyyXHcWck1N409xWRYtDD51Ilz9+300HFmmSRf+EbyovckF7052XWHYd9RZ4w60kRYudPwRuJ9nfTh5JinjTPPpDjyjOTZTxzeNEuS4z+UPP+05MpTxp1rTGvXJwe9I3nVIckJz0o23Z3s/9Zk1T8mZ/7u2NMBTJ6pWqK8y/Lk7Fckz33S2JNMltceNvvrbZcmz1yZnPfV8eaZFMcdPMRtkmy9ZXLAyuSzXx93pkny959L9txx7Ckmx4IMPzv3/Xqc45PXnZO8+OmzcZsk5xw73jyT4hUHzv23suvy5JHLkj0fNfZk49mwMbnyhmSvnWf3PXm35Bs3JuvvGm+usX3ya8n1tyYv2X94vGhh8vv7J3/3mWFFBABzTVXgPmybsSeYTL/5+LmPN24alhJOu8N+de7jDRuT7SxPTpJ863vJx7+cvObQsSdhkt30w+QL30wOfsLc/Qun6n+e+b3wqXMfn3xucvxvjTPLpFiyODlk7+SCy5KZmeGSovMuSQ7ca7qX4n7npmTJouShvzS7b6+dk/UbksuvH28ugEklY9jMZddv/oJ02l1/S3L+pZZtJ0Pov+qs5P0vnT3DzXCt4JGnJxvvTu7aOLwAPeFZyfIpfmPtiu8O2y9elbzn08l1tyZbLUle/9zhrCWDG9YMz7v/+83GafShP0r2fWOy+6uHS0IWLUy+9JaxpxrXo7YfjsXt65Ltlg77Vmw7bG9YM95cAJPK++jM8cVvJ9fdkqx61tiTTIZ//c/kKW9M9j4pefkByRFPHnui8Z30keTYg5JHLBt7ksny0eOTj7wy+dirk3965XBt8oFvH1ZETKs71g/blTslHz4u+fc/S47YNznslOTam8edbZKcel5y7IFjTzEZfufM4TKiq96VfOf04Y2Qo9899lTjOmTv4SaQJ587u++bNw7bDVP8/ALwkwhc/sctdyR//IHhhbp4GTznScMNuK47I7n6B8nT3zKcwZxWqy8dgu3QfcaeZPJs+ZDZM9pLt0jecHjy1WuTi68ed64xbbVk2O6+YnZZ8sueMZzh/oTr/JMMd8T9xCXJUfuNPcn4LvpWcsHlyZ8cOvwsLVqYvO7Zw76Lrxp7uvFstzS54MTkkmuTJ78hefYpw6qIZO6yZQAGliiTZIjbF5yZnP7i5Gm/PPY0k2fpFsPHdzz2NcmFV0zvEu73XJD8y38kp50/d/+RZyT775l89g3jzDWJHr7dsL3+1nHnGNNuK4btDbclj7/nY162WJJss2Vy0x3jzTVJ/nr1cPOgxYvGnmR8V31/2O5wn2X9j9p+2H7ze8m+uz/4M02KvR6dnLtq9vHnrxy2u68YZx6ASSZwyY1rkt9773B96cqd7//7p8F1tyS3rR1eVNxr0T1noGZmxplpEpx6TPKm580+3nT3cEbhr46e7ruTr7sz+cDnhjvj3uv7tw/bXZaPM9MkeMyK4e7JF189e83txk3Jj9bPvavytFp353A38q/8+diTTIZ7Vw796M7Zm0qtWTtsHznlq4pmZube8+DCK5K9H508eoqfXwB+EkuUp9x3b02e+fbkefsOZ5rOv2T2a5o/fuDmO5IPfn7uvvd9Jtn5YclTHzvOTJNgtxXJPrvMfu19zxsAuy5P9njEuLONafGi5KMXzz6emUnOWJ3st8fwMSfT7MTnJO+7cIjaZLj79rKtk+c8cdy5JsH7PjNc17/t0rEnmQy/vkey4/bJP39pdt85Fw3Pu/vtMd5cY7ttbfLKs2Yff+2/knd/anhjEYDNTdUZ3NWXJqu/lnzuyuFuhC9/f7LjsuEF2JKpOhKzvnLtcKfTl79/89+75rTpPcvy8O2Si76d/MbbkmVLhxfny7dJPn2iF6Ns7t6P1drvTcnDtx3OQD1mRXLuCT4S56XPGH5+DjtlWHq6Zm3yidfO3g12Wm3YmJx+vmX997X1lsm/rUr+9JzkU5cNHxP04w3JeauGy0Sm1ZJFw5Lkg98xPJ/8+K7kgy8bPj4JgM0tmJmZkgWXZ5d8nsnRD/Bfl+MyP8dlfo7L/ByX+Tku83Nc5ue4zM9xAfiZTPm5BQAAAFoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACoIXAAAACosmJmZmRl7CAAAAPh5OYMLAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABABYELAABAhf8GxysBJOGgC4wAAAAASUVORK5CYII=" alt="基本布局"></p> <h4 id="实现框选功能"><a href="#实现框选功能" aria-hidden="true" class="header-anchor">#</a> 实现框选功能</h4> <p>大致实现思路和上面的 demo 相似：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 实现话框选择功能</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建 div</span>
  <span class="token keyword">let</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span>

  
  <span class="token comment">// 获取鼠标点击时的坐标</span>
  <span class="token keyword">let</span> startPos <span class="token operator">=</span> <span class="token punctuation">{</span>
    l<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>
    t<span class="token punctuation">:</span> e<span class="token punctuation">.</span>clientY
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">move</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获得鼠标移动时与鼠标点击时的坐标水平/竖直距离（正值）</span>
    <span class="token keyword">let</span> dis <span class="token operator">=</span> <span class="token punctuation">{</span>
      l<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> startPos<span class="token punctuation">.</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span>
      t<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> startPos<span class="token punctuation">.</span>t<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 给新创建 div 添加宽高</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> startPos<span class="token punctuation">.</span>l<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span> startPos<span class="token punctuation">.</span>t<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> dis<span class="token punctuation">.</span>l <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> dis<span class="token punctuation">.</span>t <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

    <span class="token comment">// 浏览器默认行为会让画框框选到下面的 li 时，文字自动被选上了，要阻止它</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 一次只应该出现创建的一个框选效果div哟 - 再move就移除上一个</span>
    <span class="token comment">// remove() - 删除节点</span>
    box<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    once<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果：</p> <p><img src="/assets/img/1702_huakuangxuanze.e68b0bc5.gif" alt="实现框选功能"></p> <h4 id="实现框选框中的元素选中"><a href="#实现框选框中的元素选中" aria-hidden="true" class="header-anchor">#</a> 实现框选框中的元素选中</h4> <ul><li>选框要和每一个 <code>&lt;li&gt;</code> 做碰撞检测；</li> <li>使用上面demo所写的判断方法；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> listLis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 循环解决多个碰撞检测</span>
listLis<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断是否框选</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isContact</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>效果：</p> <p><img src="/assets/img/1703_huakuangxuanze.da4f1a72.gif" alt="实现框选框中的元素选中"></p> <p>待改进：</p> <ol><li>选中后，点击页面空白部分，选中不清除；</li></ol> <h4 id="将选中元素添加至画框中"><a href="#将选中元素添加至画框中" aria-hidden="true" class="header-anchor">#</a> 将选中元素添加至画框中</h4> <p>在 mouseup 时进行操作：</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> activeBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.active'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  activeBox<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
      * appendChild() - 直接将元素节点从一个地方移到另一个地方（“移动”）
      */</span>
    bigBox<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  once<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果：</p> <p><img src="/assets/img/1704_huakuangxuanze.fad932b1.gif" alt="将选中元素添加至画框中"></p> <h2 id="习题"><a href="#习题" aria-hidden="true" class="header-anchor">#</a> 习题</h2> <h4 id="_01-不是事件代理的优点的是："><a href="#_01-不是事件代理的优点的是：" aria-hidden="true" class="header-anchor">#</a> 01 不是事件代理的优点的是：</h4> <ol><li>可以为将来元素绑定事件；</li> <li>减少事件注册； - 绑定于父级，父级下的子级数量不定的喔</li> <li>减少内存消耗； - DOM事件少了，内存消耗自然就少了</li> <li>不用查找元素； - 需要判断事件发生的元素在哪儿啊</li></ol> <h4 id="_02-onclick-事件绑定的说明正确的是："><a href="#_02-onclick-事件绑定的说明正确的是：" aria-hidden="true" class="header-anchor">#</a> 02 onclick 事件绑定的说明正确的是：</h4> <ol><li>可以多次绑定； - 可多次添加，但最终方法会覆盖掉先前的所有方法（事件不可累加）</li> <li>事件函数中有一个参数，是事件对象；</li> <li>只能绑定在 document 上；</li> <li>一个鼠标连点两次时触发的事件；</li></ol> <h4 id="_03-addeventlisten-方法正确的是："><a href="#_03-addeventlisten-方法正确的是：" aria-hidden="true" class="header-anchor">#</a> 03 addEventListen 方法正确的是：</h4> <ol><li>添加事件的一种方式；</li> <li>不能用在捕获节点绑定事件； - 其参数三专门用于处理捕获控制的</li> <li>绑定同一个处理函数会被覆盖； - onclick 这种才会啦</li> <li>不能解除绑定； - removeEventListen 了解一下</li></ol> <h4 id="事件流的执行顺序："><a href="#事件流的执行顺序：" aria-hidden="true" class="header-anchor">#</a> 事件流的执行顺序：</h4> <p>捕获 - 目标 - 冒泡</p> <div class="language- extra-class"><pre class="language-text"><code>目标：事件源
捕获：目标元素之外的
冒泡：目标元素之外的
</code></pre></div><h4 id="目标元素指的是什么：-target-不是-currenttarget"><a href="#目标元素指的是什么：-target-不是-currenttarget" aria-hidden="true" class="header-anchor">#</a> 目标元素指的是什么： target 不是 currentTarget</h4> <ol><li>绑定了事件的元素的子元素；</li> <li>绑定事件的元素的父元素；</li> <li>触发事件流的元素；</li> <li>绑定了事件的元素；</li></ol> <h4 id="下面关于事件绑定说法错误的是："><a href="#下面关于事件绑定说法错误的是：" aria-hidden="true" class="header-anchor">#</a> 下面关于事件绑定说法错误的是：</h4> <ol><li>addEventListener 是标准浏览器下所支持的事件绑定方法；</li> <li>addEventListener 的 passive 设置为 true 才可以阻止默认事件； - 是 false 啦</li> <li>事件绑定函数内的 this 指向是 window； - 这个有争议！！！</li> <li>addEventListener 必须要传递 2 个参数，分别是事件名和绑定函数；</li></ol> <h4 id><a href="#" aria-hidden="true" class="header-anchor">#</a></h4></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/js/bom/" class="prev">
          Learn | BOM
        </a></span> <span class="next"><a href="/js/async/">
          Learn | 异步处理
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.3f739354.js" defer></script><script src="/assets/js/2.d233157e.js" defer></script>
  </body>
</html>
